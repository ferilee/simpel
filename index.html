<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIMPEL - Sistem Informasi dan Pembelajaran Elektronik</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            box-sizing: border-box;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-hover {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        .fade-in {
            animation: fadeIn 0.6s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 12px 20px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            z-index: 1000;
            transform: translateX(150%);
            transition: transform 0.3s ease;
        }
        .toast.show {
            transform: translateX(0);
        }
        .toast.success {
            background-color: #10B981;
        }
        .toast.error {
            background-color: #EF4444;
        }
        .toast.info {
            background-color: #3B82F6;
        }
        
        /* Login & Register Page Styles */
        .auth-container {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.9) 0%, rgba(118, 75, 162, 0.9) 100%), 
                        url('https://raw.githubusercontent.com/ferilee/simpel/main/Background-SIMPEL.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            position: relative;
            overflow: hidden;
        }
        
        .auth-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 119, 198, 0.2) 0%, transparent 50%);
        }
        
        .floating-label {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255, 255, 255, 0.8);
            font-size: 16px;
            transition: all 0.3s ease;
            pointer-events: none;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 0 8px;
            border-radius: 4px;
        }
        
        .input-field:focus + .floating-label,
        .input-field:not(:placeholder-shown) + .floating-label {
            top: 0;
            transform: translateY(-50%);
            font-size: 12px;
            color: #ffffff;
            font-weight: 600;
            background: rgba(59, 130, 246, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .input-field {
            padding-top: 12px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
        }
        
        .input-field:focus {
            border-color: rgba(59, 130, 246, 0.6);
            background: rgba(255, 255, 255, 0.3);
            box-shadow: 
                0 0 0 3px rgba(59, 130, 246, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }
        
        .form-card {
            backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.25);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.4),
                inset 0 -1px 0 rgba(255, 255, 255, 0.1);
            position: relative;
            z-index: 1;
        }
        
        .btn-auth {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            font-weight: 600;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .btn-auth::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }
        
        .btn-auth:hover::before {
            left: 100%;
        }
        
        .btn-auth:hover {
            transform: translateY(-2px);
            background: rgba(255, 255, 255, 0.3);
            box-shadow: 
                0 10px 25px rgba(102, 126, 234, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }
        
        .btn-auth:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .btn-demo {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .btn-demo:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-1px);
        }
        
        .input-container {
            position: relative;
            margin-bottom: 24px;
        }
        
        .show-password {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            color: rgba(255, 255, 255, 0.7);
            transition: color 0.3s ease;
            z-index: 10;
        }
        
        .show-password:hover {
            color: #ffffff;
        }

        /* Floating Image Animation */
        .floating-image {
            animation: floating 3s ease-in-out infinite;
            filter: drop-shadow(0 20px 30px rgba(0, 0, 0, 0.3));
        }

        @keyframes floating {
            0% {
                transform: translateY(0px) rotate(0deg);
            }
            50% {
                transform: translateY(-15px) rotate(1deg);
            }
            100% {
                transform: translateY(0px) rotate(0deg);
            }
        }

        /* Pulse effect for additional visual interest */
        .pulse-glow {
            animation: pulseGlow 4s ease-in-out infinite;
        }

        @keyframes pulseGlow {
            0%, 100% {
                filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.2));
            }
            50% {
                filter: drop-shadow(0 0 30px rgba(255, 255, 255, 0.4));
            }
        }

        /* Custom select styles for register form */
        .custom-select {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding-top: 12px;
        }

        .custom-select:focus {
            border-color: rgba(59, 130, 246, 0.6);
            background: rgba(255, 255, 255, 0.3);
            box-shadow: 
                0 0 0 3px rgba(59, 130, 246, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        .custom-select option {
            background: rgba(102, 126, 234, 0.9);
            color: white;
        }

        /* Custom checkbox styles */
        .custom-checkbox {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .custom-checkbox:checked {
            background-color: #3B82F6;
            border-color: #3B82F6;
        }

        /* Demo account badges */
        .demo-badge {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        /* Dashboard Guru Styles */
        .sidebar-item {
            transition: all 0.3s ease;
        }
        .sidebar-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        .sidebar-item.active {
            background: rgba(255, 255, 255, 0.2);
            border-right: 4px solid white;
        }
        .dark .sidebar-item.active {
            background: rgba(255, 255, 255, 0.15);
        }
    </style>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#eff6ff',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            900: '#1e3a8a'
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 dark:bg-gray-900 transition-colors duration-300">
    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <!-- Landing Page -->
    <div id="landingPage" class="min-h-screen">
        <!-- Header -->
        <header class="gradient-bg text-white">
            <div class="container mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-white rounded-lg flex items-center justify-center">
                            <span class="text-purple-600 font-bold text-xl">S</span>
                        </div>
                        <h1 class="text-2xl font-bold">SIMPEL</h1>
                    </div>
                    <div class="space-x-4">
                        <button onclick="showLogin()" class="bg-white text-purple-600 px-6 py-2 rounded-lg font-semibold hover:bg-gray-100 transition">
                            Masuk
                        </button>
                        <button onclick="showRegister()" class="border-2 border-white px-6 py-2 rounded-lg font-semibold hover:bg-white hover:text-purple-600 transition">
                            Daftar
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Hero Section -->
        <section class="gradient-bg text-white py-20">
            <div class="container mx-auto px-6">
                <div class="grid lg:grid-cols-2 gap-12 items-center">
                    <!-- Left Column - Text -->
                    <div class="fade-in">
                        <h2 class="text-5xl font-bold mb-6">
                            Sistem Informasi dan<br>Pembelajaran Elektronik
                        </h2>
                        <p class="text-xl mb-8 opacity-90">
                            Platform pembelajaran digital yang memudahkan guru, wali kelas, dan siswa dalam mengelola proses belajar mengajar dengan fitur micro learning yang inovatif.
                        </p>
                        <button onclick="showRegister()" class="bg-white text-purple-600 px-8 py-4 rounded-lg text-lg font-semibold hover:bg-gray-100 transition transform hover:scale-105">
                            Mulai Sekarang
                        </button>
                    </div>
                    
                    <!-- Right Column - Image -->
                    <div class="fade-in flex justify-center lg:justify-end">
                        <div class="relative">
                            <img 
                                src="https://github.com/ferilee/simpel/raw/main/Ferilee%20-%20SIMPEL.png" 
                                alt="Platform SIMPEL - Sistem Informasi dan Pembelajaran Elektronik"
                                class="floating-image pulse-glow max-w-full h-auto rounded-2xl"
                                onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDQwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iMzAwIiBmaWxsPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSkiIHJ4PSIyMCIvPgo8dGV4dCB4PSIyMDAiIHk9IjE1MCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE2IiBmaWxsPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOCkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIwLjM1ZW0iPkZlcmlsZWUgLSBTSU1QRUwgSWxsdXN0cmF0aW9uPC90ZXh0Pgo8dGV4dCB4PSIyMDAiIHk9IjE3MCIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmaWxsPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNikiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIwLjM1ZW0iPlN5c3RlbSBJbmZvcm1hc2kgZGFuIFBlbWJlbGFqYXJhbiBFbGVrdHJvbmlrPC90ZXh0Pgo8L3N2Zz4K'"
                            >
                            <!-- Floating decorative elements -->
                            <div class="absolute -top-4 -right-4 w-8 h-8 bg-yellow-400 rounded-full opacity-60 animate-pulse"></div>
                            <div class="absolute -bottom-6 -left-6 w-12 h-12 bg-blue-400 rounded-full opacity-40 animate-pulse" style="animation-delay: 1s;"></div>
                            <div class="absolute top-1/2 -right-8 w-6 h-6 bg-green-400 rounded-full opacity-50 animate-pulse" style="animation-delay: 2s;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section class="py-20 bg-white">
            <div class="container mx-auto px-6">
                <h3 class="text-4xl font-bold text-center text-gray-800 mb-16">Fitur Unggulan</h3>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="bg-gradient-to-br from-blue-50 to-blue-100 p-8 rounded-xl card-hover">
                        <div class="w-16 h-16 bg-blue-500 rounded-lg flex items-center justify-center mb-6">
                            <span class="text-white text-2xl">üìö</span>
                        </div>
                        <h4 class="text-xl font-bold text-gray-800 mb-4">Micro Learning Platform</h4>
                        <p class="text-gray-600">Platform pembelajaran dengan konten bite-sized yang mudah dipahami dan diakses kapan saja.</p>
                    </div>
                    
                    <div class="bg-gradient-to-br from-green-50 to-green-100 p-8 rounded-xl card-hover">
                        <div class="w-16 h-16 bg-green-500 rounded-lg flex items-center justify-center mb-6">
                            <span class="text-white text-2xl">üéØ</span>
                        </div>
                        <h4 class="text-xl font-bold text-gray-800 mb-4">Teaching Kit</h4>
                        <p class="text-gray-600">Kumpulan materi dan tools mengajar yang membantu guru menyampaikan pembelajaran dengan efektif.</p>
                    </div>
                    
                    <div class="bg-gradient-to-br from-purple-50 to-purple-100 p-8 rounded-xl card-hover">
                        <div class="w-16 h-16 bg-purple-500 rounded-lg flex items-center justify-center mb-6">
                            <span class="text-white text-2xl">‚úÖ</span>
                        </div>
                        <h4 class="text-xl font-bold text-gray-800 mb-4">Kehadiran & Perizinan</h4>
                        <p class="text-gray-600">Sistem absensi digital dan pengelolaan perizinan yang terintegrasi dan mudah digunakan.</p>
                    </div>
                    
                    <div class="bg-gradient-to-br from-orange-50 to-orange-100 p-8 rounded-xl card-hover">
                        <div class="w-16 h-16 bg-orange-500 rounded-lg flex items-center justify-center mb-6">
                            <span class="text-white text-2xl">üìä</span>
                        </div>
                        <h4 class="text-xl font-bold text-gray-800 mb-4">Penilaian & Pelaporan</h4>
                        <p class="text-gray-600">Tools penilaian komprehensif dengan laporan otomatis untuk monitoring progress siswa.</p>
                    </div>
                    
                    <div class="bg-gradient-to-br from-red-50 to-red-100 p-8 rounded-xl card-hover">
                        <div class="w-16 h-16 bg-red-500 rounded-lg flex items-center justify-center mb-6">
                            <span class="text-white text-2xl">üì¢</span>
                        </div>
                        <h4 class="text-xl font-bold text-gray-800 mb-4">Pengumuman</h4>
                        <p class="text-gray-600">Sistem notifikasi dan pengumuman real-time untuk komunikasi yang efektif.</p>
                    </div>
                    
                    <div class="bg-gradient-to-br from-indigo-50 to-indigo-100 p-8 rounded-xl card-hover">
                        <div class="w-16 h-16 bg-indigo-500 rounded-lg flex items-center justify-center mb-6">
                            <span class="text-white text-2xl">üë•</span>
                        </div>
                        <h4 class="text-xl font-bold text-gray-800 mb-4">Multi Dashboard</h4>
                        <p class="text-gray-600">Dashboard khusus untuk guru, wali kelas, dan siswa dengan fitur yang disesuaikan peran.</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Registration Form - Updated with Modern Design -->
    <div id="registerPage" class="min-h-screen auth-container hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <main class="w-full max-w-md">
                <div class="form-card rounded-2xl shadow-2xl p-8">
                    <header class="text-center mb-8">
                        <div class="flex justify-center mb-4">
                            <div class="w-16 h-16 bg-white rounded-lg flex items-center justify-center">
                                <span class="text-purple-600 font-bold text-2xl">S</span>
                            </div>
                        </div>
                        <h1 class="text-3xl font-bold text-white mb-2 drop-shadow-lg">Daftar SIMPEL</h1>
                        <p class="text-white text-opacity-90">Buat akun baru Anda</p>
                    </header>
                    
                    <form id="registerForm" class="space-y-6">
                        <div class="input-container">
                            <input 
                                type="text" 
                                id="regName"
                                class="input-field w-full px-4 py-3 border-2 rounded-lg focus:outline-none transition-all duration-300"
                                placeholder=" "
                                required
                            >
                            <label for="regName" class="floating-label">Nama Lengkap</label>
                        </div>
                        
                        <div class="input-container">
                            <input 
                                type="email" 
                                id="regEmail"
                                class="input-field w-full px-4 py-3 border-2 rounded-lg focus:outline-none transition-all duration-300"
                                placeholder=" "
                                required
                            >
                            <label for="regEmail" class="floating-label">Email</label>
                        </div>
                        
                        <div class="input-container">
                            <input 
                                type="password" 
                                id="regPassword"
                                class="input-field w-full px-4 py-3 pr-12 border-2 rounded-lg focus:outline-none transition-all duration-300"
                                placeholder=" "
                                required
                            >
                            <label for="regPassword" class="floating-label">Password</label>
                            <span class="show-password" onclick="toggleRegisterPassword()">
                                <svg id="regEyeIcon" width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z" clip-rule="evenodd"></path>
                                    <path d="M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z"></path>
                                </svg>
                            </span>
                        </div>
                        
                        <div class="input-container">
                            <select 
                                id="regRole" 
                                class="custom-select w-full px-4 py-3 border-2 rounded-lg focus:outline-none transition-all duration-300"
                                required
                            >
                                <option value="" class="text-gray-600">Pilih Role</option>
                                <option value="guru">Guru</option>
                                <option value="wali_kelas">Wali Kelas</option>
                                <option value="siswa">Siswa</option>
                            </select>
                            <label for="regRole" class="floating-label">Role</label>
                        </div>
                        
                        <div id="additionalFields"></div>

                        <div class="flex items-center text-sm">
                            <label class="flex items-center">
                                <input type="checkbox" class="custom-checkbox w-4 h-4 text-blue-400 bg-white bg-opacity-20 border-white border-opacity-30 rounded focus:ring-blue-400 focus:ring-opacity-50">
                                <span class="ml-2 text-white text-opacity-90">Saya setuju dengan <a href="#" class="underline">syarat dan ketentuan</a></span>
                            </label>
                        </div>
                        
                        <button 
                            type="submit" 
                            class="btn-auth w-full py-3 px-4 text-white font-semibold rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-300"
                        >
                            Daftar Sekarang
                        </button>
                    </form>
                    
                    <footer class="mt-6 text-center">
                        <p class="text-white text-opacity-90">
                            Sudah punya akun? 
                            <a href="#" onclick="showLogin()" class="text-white hover:text-white font-semibold transition-colors underline">Masuk di sini</a>
                        </p>
                    </footer>
                    
                    <!-- Pesan sukses/error -->
                    <div id="registerMessage" class="mt-4 p-3 rounded-lg hidden"></div>
                    
                    <!-- Info kredensial demo -->
                    <div class="mt-4 p-3 bg-blue-100 bg-opacity-20 border border-blue-300 border-opacity-30 rounded-lg">
                        <p class="text-white text-opacity-80 text-sm text-center">
                            <strong>üîê Platform Pembelajaran Digital</strong>
                        </p>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Login Form - Updated with Modern Design -->
    <div id="loginPage" class="min-h-screen auth-container hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <main class="w-full max-w-md">
                <div class="form-card rounded-2xl shadow-2xl p-8">
                    <header class="text-center mb-8">
                        <div class="flex justify-center mb-4">
                            <div class="w-16 h-16 bg-white rounded-lg flex items-center justify-center">
                                <span class="text-purple-600 font-bold text-2xl">S</span>
                            </div>
                        </div>
                        <h1 class="text-3xl font-bold text-white mb-2 drop-shadow-lg">Selamat Datang</h1>
                        <p class="text-white text-opacity-90">Masuk ke akun SIMPEL Anda</p>
                    </header>
                    
                    <form id="loginForm" class="space-y-6">
                        <div class="input-container">
                            <input 
                                type="text" 
                                id="loginEmail"
                                class="input-field w-full px-4 py-3 border-2 rounded-lg focus:outline-none transition-all duration-300"
                                placeholder=" "
                                required
                            >
                            <label for="loginEmail" class="floating-label">Email</label>
                        </div>
                        
                        <div class="input-container">
                            <input 
                                type="password" 
                                id="loginPassword"
                                class="input-field w-full px-4 py-3 pr-12 border-2 rounded-lg focus:outline-none transition-all duration-300"
                                placeholder=" "
                                required
                            >
                            <label for="loginPassword" class="floating-label">Password</label>
                            <span class="show-password" onclick="togglePassword()">
                                <svg id="eyeIcon" width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z" clip-rule="evenodd"></path>
                                    <path d="M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z"></path>
                                </svg>
                            </span>
                        </div>
                        
                        <div class="flex items-center justify-between text-sm">
                            <label class="flex items-center">
                                <input type="checkbox" class="custom-checkbox w-4 h-4 text-blue-400 bg-white bg-opacity-20 border-white border-opacity-30 rounded focus:ring-blue-400 focus:ring-opacity-50">
                                <span class="ml-2 text-white text-opacity-90">Ingat saya</span>
                            </label>
                            <a href="#" class="text-white text-opacity-90 hover:text-white transition-colors underline">Lupa password?</a>
                        </div>
                        
                        <button 
                            type="submit" 
                            class="btn-auth w-full py-3 px-4 text-white font-semibold rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-300"
                        >
                            Masuk
                        </button>

                        <!-- Demo Accounts Section -->
                        <div class="border-t border-white border-opacity-20 pt-6">
                            <p class="text-white text-opacity-80 text-sm text-center mb-4">
                                <strong>üöÄ Coba Akun Demo</strong>
                            </p>
                            <div class="grid grid-cols-1 gap-3">
                                <button 
                                    type="button"
                                    onclick="loginDemo('guru@example.com', 'password123')"
                                    class="btn-demo w-full py-2 px-4 text-white font-medium rounded-lg flex items-center justify-center space-x-2"
                                >
                                    <span>üë®‚Äçüè´</span>
                                    <span>Login sebagai Guru</span>
                                </button>
                                <button 
                                    type="button"
                                    onclick="loginDemo('wali@example.com', 'password123')"
                                    class="btn-demo w-full py-2 px-4 text-white font-medium rounded-lg flex items-center justify-center space-x-2"
                                >
                                    <span>üë©‚Äçüíº</span>
                                    <span>Login sebagai Wali Kelas</span>
                                </button>
                                <button 
                                    type="button"
                                    onclick="loginDemo('siswa@example.com', 'password123')"
                                    class="btn-demo w-full py-2 px-4 text-white font-medium rounded-lg flex items-center justify-center space-x-2"
                                >
                                    <span>üë®‚Äçüéì</span>
                                    <span>Login sebagai Siswa</span>
                                </button>
                            </div>
                        </div>
                    </form>
                    
                    <footer class="mt-6 text-center">
                        <p class="text-white text-opacity-90">
                            Belum punya akun? 
                            <a href="#" onclick="showRegister()" class="text-white hover:text-white font-semibold transition-colors underline">Daftar sekarang</a>
                        </p>
                    </footer>
                    
                    <!-- Pesan sukses/error -->
                    <div id="loginMessage" class="mt-4 p-3 rounded-lg hidden"></div>
                    
                    <!-- Info kredensial demo -->
                    <div class="mt-4 p-3 bg-blue-100 bg-opacity-20 border border-blue-300 border-opacity-30 rounded-lg">
                        <p class="text-white text-opacity-80 text-sm text-center mb-2">
                            <strong>üîê Kredensial Demo</strong>
                        </p>
                        <div class="space-y-1 text-xs text-white text-opacity-70">
                            <div class="flex justify-between">
                                <span>Guru:</span>
                                <span>guru@example.com / password123</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Wali Kelas:</span>
                                <span>wali@example.com / password123</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Siswa:</span>
                                <span>siswa@example.com / password123</span>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Dashboard Pages -->
    <!-- Dashboard Guru Lengkap -->
    <div id="guruDashboard" class="min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300 hidden">
        <!-- Header -->
        <header class="gradient-bg text-white shadow-lg sticky top-0 z-50">
            <div class="flex items-center justify-between px-6 py-4">
                <div class="flex items-center space-x-4">
                    <button id="sidebarToggle" class="lg:hidden">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                    <div>
                        <h1 class="text-xl font-bold">SMK Negeri Pasirian</h1>
                        <p class="text-sm opacity-90">Sistem Pembelajaran Digital</p>
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <!-- Dark Mode Toggle -->
                    <button id="darkModeToggle" class="p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-colors">
                        <i class="fas fa-moon text-xl dark:hidden"></i>
                        <i class="fas fa-sun text-xl hidden dark:block"></i>
                    </button>
                    
                    <!-- Profile -->
                    <div class="flex items-center space-x-3">
                        <img src="https://live.staticflickr.com/65535/54509797172_fa540c8b67_b.jpg"
                              alt="Feri Lee"
                              class="w-10 h-10 rounded-full border-2 border-white"
                             onerror="this.src=''; this.innerHTML='<div class=\'w-10 h-10 rounded-full bg-white bg-opacity-20 flex items-center justify-center text-white font-bold\'>FL</div>'">
                        <div class="hidden md:block">
                            <p class="font-semibold" id="guruNameDisplay">Feri Lee</p>
                            <p class="text-sm opacity-90">Guru Matematika</p>
                        </div>
                        <div class="w-3 h-3 bg-green-400 rounded-full"></div>
                    </div>
                </div>
            </div>
        </header>

        <div class="flex">
            <!-- Sidebar -->
            <aside id="sidebar" class="gradient-bg text-white w-64 min-h-screen fixed lg:relative transform -translate-x-full lg:translate-x-0 transition-transform duration-300 z-40">
                <nav class="p-6">
                    <ul class="space-y-2">
                        <li>
                            <a href="#" onclick="showGuruPage('beranda')" class="sidebar-item active flex items-center space-x-3 p-3 rounded-lg" data-page="beranda">
                                <i class="fas fa-home"></i>
                                <span>Beranda</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" onclick="showGuruPage('perencanaan')" class="sidebar-item flex items-center space-x-3 p-3 rounded-lg" data-page="perencanaan">
                                <i class="fas fa-clipboard-list"></i>
                                <span>Perencanaan Pembelajaran</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" onclick="showGuruPage('kalender')" class="sidebar-item flex items-center space-x-3 p-3 rounded-lg" data-page="kalender">
                                <i class="fas fa-calendar-alt"></i>
                                <span>Kalender Akademik</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" onclick="showGuruPage('jadwal')" class="sidebar-item flex items-center space-x-3 p-3 rounded-lg" data-page="jadwal">
                                <i class="fas fa-clock"></i>
                                <span>Jadwal Mengajarku</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" onclick="showGuruPage('siswaku')" class="sidebar-item flex items-center space-x-3 p-3 rounded-lg" data-page="siswaku">
                                <i class="fas fa-users"></i>
                                <span>Siswaku</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" onclick="showGuruPage('walikelas')" class="sidebar-item flex items-center space-x-3 p-3 rounded-lg" data-page="walikelas">
                                <i class="fas fa-user-tie"></i>
                                <span>Wali Kelas</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" onclick="showGuruPage('microlearning')" class="sidebar-item flex items-center space-x-3 p-3 rounded-lg" data-page="microlearning">
                                <i class="fas fa-book-open"></i>
                                <span>Micro Learning</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </aside>

            <!-- Overlay for mobile -->
            <div id="overlay" class="fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden hidden"></div>

            <!-- Main Content -->
            <main class="flex-1 p-6 lg:ml-0">
                <!-- Beranda Page -->
                <div id="guru-page-beranda" class="guru-page-content">
                    <!-- Welcome Section -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6 card-hover">
                        <div class="flex items-center justify-between">
                            <div>
                                <h2 class="text-2xl font-bold text-gray-800 dark:text-white" id="guruWelcome">Selamat Datang!</h2>
                                <p class="text-gray-600 dark:text-gray-300">Semoga hari ini menjadi hari yang produktif dalam mengajar</p>
                            </div>
                            <div class="text-right">
                                <p id="currentDate" class="text-lg font-semibold text-gray-800 dark:text-white"></p>
                                <p id="currentTime" class="text-gray-600 dark:text-gray-300"></p>
                            </div>
                        </div>
                    </div>

                    <!-- Statistics Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                        <div class="bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl p-6 card-hover">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-blue-100">Jam Mengajar/Minggu</p>
                                    <p class="text-3xl font-bold">28</p>
                                </div>
                                <i class="fas fa-clock text-3xl text-blue-200"></i>
                            </div>
                        </div>
                        
                        <div class="bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl p-6 card-hover cursor-pointer" onclick="openProfileModal()">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-green-100">Profil Wali Kelas</p>
                                    <p class="text-lg font-bold">Lihat Detail</p>
                                </div>
                                <i class="fas fa-user-tie text-3xl text-green-200"></i>
                            </div>
                        </div>
                        
                        <div class="bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-xl p-6 card-hover cursor-pointer" onclick="toggleTodoList()">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-purple-100">To-Do List</p>
                                    <p class="text-3xl font-bold" id="todoCount">5</p>
                                </div>
                                <i class="fas fa-tasks text-3xl text-purple-200"></i>
                            </div>
                        </div>
                        
                        <div class="bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl p-6 card-hover cursor-pointer" onclick="toggleNotes()">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-orange-100">Catatan</p>
                                    <p class="text-lg font-bold">Buka Catatan</p>
                                </div>
                                <i class="fas fa-sticky-note text-3xl text-orange-200"></i>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- Today's Schedule -->
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 card-hover">
                            <div class="mb-4">
                                <h3 class="text-xl font-bold text-gray-800 dark:text-white">Jadwal Hari Ini</h3>
                            </div>
                            
                            <div id="todaySchedule" class="space-y-3 mb-4">
                                <!-- Schedule items will be populated by JavaScript -->
                            </div>
                            
                            <button onclick="showGuruPage('jadwal')" class="w-full bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg transition-colors font-medium">
                                <i class="fas fa-calendar-alt mr-2"></i>Lihat Jadwal Lengkap
                            </button>
                        </div>

                        <!-- Upcoming Activities -->
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 card-hover">
                            <div class="mb-4">
                                <h3 class="text-xl font-bold text-gray-800 dark:text-white">Kegiatan Mendatang</h3>
                            </div>
                            
                            <div id="upcomingActivities" class="space-y-3 mb-4">
                                <!-- Activities will be populated by JavaScript -->
                            </div>
                            
                            <button onclick="showGuruPage('kalender')" class="w-full bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-lg transition-colors font-medium">
                                <i class="fas fa-calendar-check mr-2"></i>Lihat Kalender Lengkap
                            </button>
                        </div>

                        <!-- Quick Actions -->
<div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 card-hover">
    <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-4">Aksi Cepat</h3>
    
    <div class="grid grid-cols-2 gap-4">
        <button onclick="openJournalModal()" class="bg-blue-500 hover:bg-blue-600 text-white p-4 rounded-lg transition-colors">
            <i class="fas fa-book text-2xl mb-2"></i>
            <p class="font-medium">Jurnal Mengajar</p>
        </button>
        
        <!-- Updated Presensi Section with Prayer Options -->
        <div class="relative group">
            <button class="bg-green-500 hover:bg-green-600 text-white p-4 rounded-lg transition-colors w-full">
                <i class="fas fa-clipboard-check text-2xl mb-2"></i>
                <p class="font-medium">Presensi</p>
                <i class="fas fa-chevron-down text-xs mt-1"></i>
            </button>
            <div class="absolute bottom-full left-0 mb-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10">
                <div class="py-2">
                    <a href="https://idt.community.or.id/daftar-hadir-siswa" target="_blank" class="w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center space-x-2">
                        <i class="fas fa-user-check text-green-500"></i>
                        <span>Absensi Siswa</span>
                    </a>
                    <button onclick="openPrayerAttendanceModal()" class="w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center space-x-2">
                        <i class="fas fa-mosque text-blue-500"></i>
                        <span>Kehadiran Sholat</span>
                    </button>
                    <button onclick="openUnderConstructionModal('Keterlambatan Siswa')" class="w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center space-x-2">
                        <i class="fas fa-clock text-orange-500"></i>
                        <span>Keterlambatan Siswa</span>
                    </button>
                </div>
            </div>
        </div>
        
        <button class="bg-purple-500 hover:bg-purple-600 text-white p-4 rounded-lg transition-colors">
            <i class="fas fa-star text-2xl mb-2"></i>
            <p class="font-medium">Nilai Siswa</p>
        </button>
        
        <div class="relative group">
            <button class="bg-orange-500 hover:bg-orange-600 text-white p-4 rounded-lg transition-colors w-full">
                <i class="fas fa-chart-bar text-2xl mb-2"></i>
                <p class="font-medium">Laporan</p>
                <i class="fas fa-chevron-down text-xs mt-1"></i>
            </button>
            <div class="absolute bottom-full left-0 mb-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10">
                <div class="py-2">
                    <a href="https://idt.community.or.id/izin-murid" target="_blank" class="w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center space-x-2">
                        <i class="fas fa-user-clock text-blue-500"></i>
                        <span>Laporan Izin Siswa</span>
                    </a>
                    <button onclick="openUnderConstructionModal('Laporan Sikap Siswa')" class="w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center space-x-2">
                        <i class="fas fa-user-check text-green-500"></i>
                        <span>Laporan Sikap Siswa</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

                    <!-- Tips Section -->
                    <div class="bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-xl p-6 mt-6 card-hover">
                        <h3 class="text-xl font-bold mb-2">üí° Tips Hari Ini</h3>
                        <p>Gunakan metode pembelajaran interaktif untuk meningkatkan engagement siswa. Cobalah teknik "Think-Pair-Share" dalam pelajaran matematika hari ini!</p>
                    </div>
                </div>

                <!-- Jadwal Mengajarku Page -->
                <div id="guru-page-jadwal" class="guru-page-content hidden">
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6">
                        <h2 class="text-2xl font-bold text-gray-800 dark:text-white mb-2">Jadwal Mengajarku</h2>
                        <p class="text-gray-600 dark:text-gray-300">Jadwal mengajar mingguan dalam format kartu per hari</p>
                    </div>
                    
                    <!-- Legend -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6">
                        <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-4">Keterangan Kelas</h3>
                        <div class="flex flex-wrap gap-4">
                            <div class="flex items-center space-x-2">
                                <div class="w-4 h-4 bg-blue-500 rounded"></div>
                                <span class="text-sm text-gray-600 dark:text-gray-300">X TKJ A/B</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-4 h-4 bg-green-500 rounded"></div>
                                <span class="text-sm text-gray-600 dark:text-gray-300">XI RPL</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-4 h-4 bg-purple-500 rounded"></div>
                                <span class="text-sm text-gray-600 dark:text-gray-300">XI DPIB</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-4 h-4 bg-orange-500 rounded"></div>
                                <span class="text-sm text-gray-600 dark:text-gray-300">XII TKJ A/B</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-4 h-4 bg-red-500 rounded"></div>
                                <span class="text-sm text-gray-600 dark:text-gray-300">X DPIB</span>
                            </div>
                        </div>
                    </div>

                    <!-- Schedule Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6" id="scheduleCards">
                        <!-- Schedule cards will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Siswaku Page -->
                <div id="guru-page-siswaku" class="guru-page-content hidden">
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6">
                        <h2 class="text-2xl font-bold text-gray-800 dark:text-white mb-6">Data Siswaku</h2>
                        
                        <!-- Search, Filter, and Actions -->
                        <div class="flex flex-col lg:flex-row gap-4 mb-6">
                            <div class="flex-1">
                                <input type="text" id="searchStudent" placeholder="Cari nama siswa..."
                                        class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white">
                            </div>
                            <select id="filterClass" class="p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white">
                                <option value="">Semua Kelas</option>
                            </select>
                            <select id="filterMajor" class="p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white">
                                <option value="">Semua Jurusan</option>
                            </select>
                            <a href="https://idt.community.or.id/daftar-hadir-siswa" target="_blank"
                                class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg transition-colors flex items-center space-x-2 whitespace-nowrap">
                                <i class="fas fa-clipboard-check"></i>
                                <span>Isi Daftar Hadir</span>
                            </a>
                        </div>

                        <!-- Students Table -->
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-50 dark:bg-gray-700">
                                    <tr>
                                        <th class="p-3 text-left">Siswa</th>
                                        <th class="p-3 text-left">Kelas</th>
                                        <th class="p-3 text-left">Jurusan</th>
                                    </tr>
                                </thead>
                                <tbody id="studentsTable">
                                    <!-- Students will be populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>

                        <!-- Pagination -->
                        <div class="flex justify-between items-center mt-6">
                            <p class="text-gray-600 dark:text-gray-300">Menampilkan <span id="showingCount">1-10</span> dari <span id="totalCount">0</span> siswa</p>
                            <div class="flex space-x-2">
                                <button id="prevPage" class="px-4 py-2 bg-gray-200 dark:bg-gray-600 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500">Sebelumnya</button>
                                <button id="nextPage" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">Selanjutnya</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Wali Kelas Page -->
                <div id="guru-page-walikelas" class="guru-page-content hidden">
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6">
                        <h2 class="text-2xl font-bold text-gray-800 dark:text-white mb-2">Wali Kelas XI RPL</h2>
                        <p class="text-gray-600 dark:text-gray-300">Kelola dan pantau perkembangan siswa kelas XI RPL</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl p-6 card-hover cursor-pointer" onclick="openUnderConstructionModal('Program Wali Kelas')">
                            <i class="fas fa-clipboard-list text-3xl mb-4"></i>
                            <h3 class="text-lg font-bold mb-2">Program Wali Kelas</h3>
                            <p class="text-blue-100 text-sm">Rencana dan program kegiatan</p>
                        </div>

                        <div class="bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl p-6 card-hover cursor-pointer" onclick="openUnderConstructionModal('Biodata Siswa')">
                            <i class="fas fa-user-graduate text-3xl mb-4"></i>
                            <h3 class="text-lg font-bold mb-2">Biodata Siswa</h3>
                            <p class="text-green-100 text-sm">Data lengkap siswa kelas</p>
                        </div>

                        <div class="bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-xl p-6 card-hover cursor-pointer" onclick="openUnderConstructionModal('Laporan Bulanan')">
                            <i class="fas fa-chart-line text-3xl mb-4"></i>
                            <h3 class="text-lg font-bold mb-2">Laporan Bulanan</h3>
                            <p class="text-purple-100 text-sm">Progress dan perkembangan</p>
                        </div>

                        <div class="bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl p-6 card-hover cursor-pointer" onclick="openUnderConstructionModal('Data Perkembangan')">
                            <i class="fas fa-trending-up text-3xl mb-4"></i>
                            <h3 class="text-lg font-bold mb-2">Data Perkembangan</h3>
                            <p class="text-orange-100 text-sm">Analisis kemajuan siswa</p>
                        </div>

                        <div class="bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl p-6 card-hover cursor-pointer" onclick="openUnderConstructionModal('Jadwal Piket')">
                            <i class="fas fa-calendar-check text-3xl mb-4"></i>
                            <h3 class="text-lg font-bold mb-2">Jadwal Piket</h3>
                            <p class="text-red-100 text-sm">Pengaturan piket harian</p>
                        </div>

                        <div class="bg-gradient-to-r from-indigo-500 to-indigo-600 text-white rounded-xl p-6 card-hover cursor-pointer" onclick="openUnderConstructionModal('Struktur Organisasi')">
                            <i class="fas fa-sitemap text-3xl mb-4"></i>
                            <h3 class="text-lg font-bold mb-2">Struktur Organisasi</h3>
                            <p class="text-indigo-100 text-sm">Kepengurusan kelas</p>
                        </div>

                        <div class="bg-gradient-to-r from-pink-500 to-pink-600 text-white rounded-xl p-6 card-hover cursor-pointer" onclick="openUnderConstructionModal('Denah Tempat Duduk')">
                            <i class="fas fa-chair text-3xl mb-4"></i>
                            <h3 class="text-lg font-bold mb-2">Denah Tempat Duduk</h3>
                            <p class="text-pink-100 text-sm">Pengaturan posisi duduk</p>
                        </div>

                        <div class="bg-gradient-to-r from-teal-500 to-teal-600 text-white rounded-xl p-6 card-hover cursor-pointer" onclick="openUnderConstructionModal('Daftar Inventaris')">
                            <i class="fas fa-boxes text-3xl mb-4"></i>
                            <h3 class="text-lg font-bold mb-2">Daftar Inventaris</h3>
                            <p class="text-teal-100 text-sm">Inventaris kelas dan fasilitas</p>
                        </div>
                    </div>
                </div>

                <!-- Kalender Akademik Page -->
                <div id="guru-page-kalender" class="guru-page-content hidden">
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6">
                        <div class="flex justify-between items-center">
                            <div>
                                <h2 class="text-2xl font-bold text-gray-800 dark:text-white">Kalender Akademik</h2>
                                <p class="text-gray-600 dark:text-gray-300">Tahun Ajaran 2025/2026</p>
                            </div>
                            <a href="https://drive.google.com/file/d/1MJCb4IS-Q5JogwK9n98LUg7sls2gKBRY/view?usp=sharing" target="_blank" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors">
                                <i class="fas fa-external-link-alt mr-2"></i>Detail Kegiatan
                            </a>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Semester Ganjil -->
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6">
                            <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-4">Semester Ganjil</h3>
                            <div class="space-y-4">
                                <div class="flex items-start space-x-3 p-3 bg-blue-50 dark:bg-blue-900 rounded-lg">
                                    <i class="fas fa-play-circle text-blue-500 mt-1"></i>
                                    <div>
                                        <p class="font-semibold text-gray-800 dark:text-white">Awal Masuk/Permulaan Tahun Ajaran</p>
                                        <p class="text-sm text-gray-600 dark:text-gray-300">14 Juli 2025</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start space-x-3 p-3 bg-green-50 dark:bg-green-900 rounded-lg">
                                    <i class="fas fa-users text-green-500 mt-1"></i>
                                    <div>
                                        <p class="font-semibold text-gray-800 dark:text-white">MPLS & MOK HUT RI</p>
                                        <p class="text-sm text-gray-600 dark:text-gray-300">14-18 Juli 2025 dan 17 Agustus 2025</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start space-x-3 p-3 bg-purple-50 dark:bg-purple-900 rounded-lg">
                                    <i class="fas fa-mosque text-purple-500 mt-1"></i>
                                    <div>
                                        <p class="font-semibold text-gray-800 dark:text-white">Maulud Nabi Muhammad SAW</p>
                                        <p class="text-sm text-gray-600 dark:text-gray-300">5 September 2025</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start space-x-3 p-3 bg-orange-50 dark:bg-orange-900 rounded-lg">
                                    <i class="fas fa-clipboard-check text-orange-500 mt-1"></i>
                                    <div>
                                        <p class="font-semibold text-gray-800 dark:text-white">Tes Kompetensi Akademik (TKA)</p>
                                        <p class="text-sm text-gray-600 dark:text-gray-300">1-9 November 2025</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start space-x-3 p-3 bg-red-50 dark:bg-red-900 rounded-lg">
                                    <i class="fas fa-tree text-red-500 mt-1"></i>
                                    <div>
                                        <p class="font-semibold text-gray-800 dark:text-white">Hari Raya Natal</p>
                                        <p class="text-sm text-gray-600 dark:text-gray-300">25 Desember 2025</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start space-x-3 p-3 bg-indigo-50 dark:bg-indigo-900 rounded-lg">
                                    <i class="fas fa-gift text-indigo-500 mt-1"></i>
                                    <div>
                                        <p class="font-semibold text-gray-800 dark:text-white">Libur Semester Ganjil</p>
                                        <p class="text-sm text-gray-600 dark:text-gray-300">22-31 Desember 2025</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Semester Genap -->
                        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6">
                            <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-4">Semester Genap</h3>
                            <div class="space-y-4">
                                <div class="flex items-start space-x-3 p-3 bg-blue-50 dark:bg-blue-900 rounded-lg">
                                    <i class="fas fa-calendar text-blue-500 mt-1"></i>
                                    <div>
                                        <p class="font-semibold text-gray-800 dark:text-white">Tahun Baru Masehi</p>
                                        <p class="text-sm text-gray-600 dark:text-gray-300">1 Januari 2026</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start space-x-3 p-3 bg-green-50 dark:bg-green-900 rounded-lg">
                                    <i class="fas fa-play-circle text-green-500 mt-1"></i>
                                    <div>
                                        <p class="font-semibold text-gray-800 dark:text-white">Awal Masuk Semester Genap</p>
                                        <p class="text-sm text-gray-600 dark:text-gray-300">2 Januari 2026</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start space-x-3 p-3 bg-purple-50 dark:bg-purple-900 rounded-lg">
                                    <i class="fas fa-mosque text-purple-500 mt-1"></i>
                                    <div>
                                        <p class="font-semibold text-gray-800 dark:text-white">Isra Mi'raj</p>
                                        <p class="text-sm text-gray-600 dark:text-gray-300">16 Januari 2026</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start space-x-3 p-3 bg-red-50 dark:bg-red-900 rounded-lg">
                                    <i class="fas fa-dragon text-red-500 mt-1"></i>
                                    <div>
                                        <p class="font-semibold text-gray-800 dark:text-white">Tahun Baru Imlek</p>
                                        <p class="text-sm text-gray-600 dark:text-gray-300">17 Februari 2026</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start space-x-3 p-3 bg-orange-50 dark:bg-orange-900 rounded-lg">
                                    <i class="fas fa-certificate text-orange-500 mt-1"></i>
                                    <div>
                                        <p class="font-semibold text-gray-800 dark:text-white">PSAJ (Penilaian Asesmen Akhir Jenjang)</p>
                                        <p class="text-sm text-gray-600 dark:text-gray-300">9-18 Maret 2026</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start space-x-3 p-3 bg-yellow-50 dark:bg-yellow-900 rounded-lg">
                                    <i class="fas fa-om text-yellow-600 mt-1"></i>
                                    <div>
                                        <p class="font-semibold text-gray-800 dark:text-white">Hari Raya Nyepi</p>
                                        <p class="text-sm text-gray-600 dark:text-gray-300">19 Maret 2026</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start space-x-3 p-3 bg-teal-50 dark:bg-teal-900 rounded-lg">
                                    <i class="fas fa-moon text-teal-500 mt-1"></i>
                                    <div>
                                        <p class="font-semibold text-gray-800 dark:text-white">Hari Raya Idul Fitri</p>
                                        <p class="text-sm text-gray-600 dark:text-gray-300">20-21 Maret 2026</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start space-x-3 p-3 bg-pink-50 dark:bg-pink-900 rounded-lg">
                                    <i class="fas fa-cross text-pink-500 mt-1"></i>
                                    <div>
                                        <p class="font-semibold text-gray-800 dark:text-white">Wafatnya Isa Almasih</p>
                                        <p class="text-sm text-gray-600 dark:text-gray-300">3 April 2026</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start space-x-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                    <i class="fas fa-hammer text-gray-500 mt-1"></i>
                                    <div>
                                        <p class="font-semibold text-gray-800 dark:text-white">Hari Buruh</p>
                                        <p class="text-sm text-gray-600 dark:text-gray-300">1 Mei 2026</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start space-x-3 p-3 bg-indigo-50 dark:bg-indigo-900 rounded-lg">
                                    <i class="fas fa-cross text-indigo-500 mt-1"></i>
                                    <div>
                                        <p class="font-semibold text-gray-800 dark:text-white">Kenaikan Isa Almasih</p>
                                        <p class="text-sm text-gray-600 dark:text-gray-300">14 Mei 2026</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start space-x-3 p-3 bg-emerald-50 dark:bg-emerald-900 rounded-lg">
                                    <i class="fas fa-mosque text-emerald-500 mt-1"></i>
                                    <div>
                                        <p class="font-semibold text-gray-800 dark:text-white">Idul Adha</p>
                                        <p class="text-sm text-gray-600 dark:text-gray-300">27 Mei 2026</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start space-x-3 p-3 bg-amber-50 dark:bg-amber-900 rounded-lg">
                                    <i class="fas fa-lotus text-amber-500 mt-1"></i>
                                    <div>
                                        <p class="font-semibold text-gray-800 dark:text-white">Hari Waisak</p>
                                        <p class="text-sm text-gray-600 dark:text-gray-300">31 Mei 2026</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start space-x-3 p-3 bg-cyan-50 dark:bg-cyan-900 rounded-lg">
                                    <i class="fas fa-flag text-cyan-500 mt-1"></i>
                                    <div>
                                        <p class="font-semibold text-gray-800 dark:text-white">Hari Lahir Pancasila</p>
                                        <p class="text-sm text-gray-600 dark:text-gray-300">1 Juni 2026</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start space-x-3 p-3 bg-violet-50 dark:bg-violet-900 rounded-lg">
                                    <i class="fas fa-calendar-alt text-violet-500 mt-1"></i>
                                    <div>
                                        <p class="font-semibold text-gray-800 dark:text-white">Tahun Baru Islam</p>
                                        <p class="text-sm text-gray-600 dark:text-gray-300">17 Juni 2026</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start space-x-3 p-3 bg-lime-50 dark:bg-lime-900 rounded-lg">
                                    <i class="fas fa-file-alt text-lime-600 mt-1"></i>
                                    <div>
                                        <p class="font-semibold text-gray-800 dark:text-white">Penyerahan Rapor Semester Genap</p>
                                        <p class="text-sm text-gray-600 dark:text-gray-300">20 Juni 2026</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-start space-x-3 p-3 bg-rose-50 dark:bg-rose-900 rounded-lg">
                                    <i class="fas fa-gift text-rose-500 mt-1"></i>
                                    <div>
                                        <p class="font-semibold text-gray-800 dark:text-white">Libur Pembelajaran Akhir Tahun Ajaran</p>
                                        <p class="text-sm text-gray-600 dark:text-gray-300">23 Juni - 13 Juli 2026</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Perencanaan Pembelajaran Page -->
                <div id="guru-page-perencanaan" class="guru-page-content hidden">
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6">
                        <h2 class="text-2xl font-bold text-gray-800 dark:text-white mb-2">Perencanaan Pembelajaran</h2>
                        <p class="text-gray-600 dark:text-gray-300">Kelola dan susun rencana pembelajaran Anda</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="bg-gradient-to-br from-blue-500 to-blue-700 text-white rounded-xl p-8 card-hover cursor-pointer">
                            <div class="text-center">
                                <i class="fas fa-file-alt text-5xl mb-4"></i>
                                <h3 class="text-2xl font-bold mb-3">RPP</h3>
                                <p class="text-blue-100 mb-4">Rencana Pelaksanaan Pembelajaran untuk setiap mata pelajaran</p>
                                <div class="bg-white bg-opacity-20 rounded-lg p-3">
                                    <p class="text-sm">15 RPP Tersedia</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gradient-to-br from-green-500 to-green-700 text-white rounded-xl p-8 card-hover cursor-pointer" onclick="openCapaianModal()">
                            <div class="text-center">
                                <i class="fas fa-book text-5xl mb-4"></i>
                                <h3 class="text-2xl font-bold mb-3">Capaian Pembelajaran</h3>
                                <p class="text-green-100 mb-4">Capaian pembelajaran untuk Fase E dan Fase F</p>
                                <div class="bg-white bg-opacity-20 rounded-lg p-3">
                                    <p class="text-sm">Lihat CP</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gradient-to-br from-purple-500 to-purple-700 text-white rounded-xl p-8 card-hover cursor-pointer" onclick="openMaterialsModal()">
                            <div class="text-center">
                                <i class="fas fa-presentation text-5xl mb-4"></i>
                                <h3 class="text-2xl font-bold mb-3">Materi Pembelajaran</h3>
                                <p class="text-purple-100 mb-4">Kumpulan materi, slide, dan media pembelajaran</p>
                                <div class="bg-white bg-opacity-20 rounded-lg p-3">
                                    <p class="text-sm">Lihat Materi</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Micro Learning Page -->
                <div id="guru-page-microlearning" class="guru-page-content hidden">
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6">
                        <h2 class="text-2xl font-bold text-gray-800 dark:text-white mb-2">Micro Learning Platform</h2>
                        <p class="text-gray-600 dark:text-gray-300">Kelola kursus micro learning untuk siswa Anda</p>
                    </div>

                    <!-- Create Course Button -->
                    <div class="mb-6">
                        <button onclick="showCreateCourse()" class="bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition font-semibold">
                            <i class="fas fa-plus mr-2"></i>Buat Kursus Baru
                        </button>
                    </div>

                    <!-- Course List -->
                    <div id="courseList" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Sample courses will be added here -->
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Wali Kelas Dashboard -->
    <div id="waliKelasDashboard" class="min-h-screen bg-gray-50 hidden">
        <!-- Similar structure as guru dashboard but simplified -->
        <nav class="bg-white shadow-sm border-b">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16">
                    <div class="flex items-center">
                        <div class="w-8 h-8 bg-purple-600 rounded-lg flex items-center justify-center mr-3">
                            <span class="text-white font-bold">S</span>
                        </div>
                        <span class="text-xl font-bold text-gray-900">SIMPEL - Dashboard Wali Kelas</span>
                    </div>
                    <div class="flex items-center space-x-4">
                        <span class="text-gray-700" id="waliName">Selamat datang, Wali Kelas!</span>
                        <div class="demo-badge px-3 py-1 rounded-full text-white text-sm font-medium">
                            üîê Akun Demo
                        </div>
                        <button onclick="logout()" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition">
                            Keluar
                        </button>
                    </div>
                </div>
            </div>
        </nav>
        <div class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
            <div class="bg-white overflow-hidden shadow rounded-lg">
                <div class="px-4 py-5 sm:p-6">
                    <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">Micro Learning - Akses Kursus</h3>
                    <div id="waliCourseList" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Available courses will be shown here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Siswa Dashboard -->
    <div id="siswaDashboard" class="min-h-screen bg-gray-50 hidden">
        <nav class="bg-white shadow-sm border-b">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16">
                    <div class="flex items-center">
                        <div class="w-8 h-8 bg-purple-600 rounded-lg flex items-center justify-center mr-3">
                            <span class="text-white font-bold">S</span>
                        </div>
                        <span class="text-xl font-bold text-gray-900">SIMPEL - Dashboard Siswa</span>
                    </div>
                    <div class="flex items-center space-x-4">
                        <span class="text-gray-700" id="siswaName">Selamat datang, Siswa!</span>
                        <div class="demo-badge px-3 py-1 rounded-full text-white text-sm font-medium">
                            üîê Akun Demo
                        </div>
                        <button onclick="logout()" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition">
                            Keluar
                        </button>
                    </div>
                </div>
            </div>
        </nav>
        <div class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
            <div class="bg-white overflow-hidden shadow rounded-lg">
                <div class="px-4 py-5 sm:p-6">
                    <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">Kursus Tersedia</h3>
                    <div id="siswaCourseList" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Available courses will be shown here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals for Guru Dashboard -->
    <!-- Profile Modal -->
    <div id="profileModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full transform transition-all">
            <div class="gradient-bg text-white p-6 rounded-t-xl">
                <div class="flex justify-between items-center">
                    <h3 class="text-xl font-bold">Profil Wali Kelas</h3>
                    <button onclick="closeProfileModal()" class="text-white hover:text-gray-200">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            
            <div class="p-6">
                <div class="text-center mb-6">
                    <img src="https://live.staticflickr.com/65535/54509797172_fa540c8b67_b.jpg"
                          alt="Feri Dwi Hermawan"
                          class="w-24 h-24 rounded-full mx-auto border-4 border-blue-500 mb-4"
                         onerror="this.src=''; this.innerHTML='<div class=\'w-24 h-24 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold text-2xl mx-auto\'>FH</div>'">
                    <h4 class="text-xl font-bold text-gray-800 dark:text-white">Feri Dwi Hermawan, S.Pd.</h4>
                </div>
                
                <div class="space-y-4">
                    <div class="flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                        <i class="fas fa-user text-blue-500 text-xl"></i>
                        <div>
                            <p class="text-sm text-gray-600 dark:text-gray-300">Nama Lengkap</p>
                            <p class="font-semibold text-gray-800 dark:text-white">Feri Dwi Hermawan, S.Pd.</p>
                        </div>
                    </div>
                    
                    <div class="flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                        <i class="fas fa-calendar-alt text-green-500 text-xl"></i>
                        <div>
                            <p class="text-sm text-gray-600 dark:text-gray-300">Pengalaman Mengajar</p>
                            <p class="font-semibold text-gray-800 dark:text-white">20 Tahun</p>
                        </div>
                    </div>
                    
                    <div class="flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                        <i class="fas fa-graduation-cap text-purple-500 text-xl"></i>
                        <div>
                            <p class="text-sm text-gray-600 dark:text-gray-300">Kompetensi</p>
                            <p class="font-semibold text-gray-800 dark:text-white">Matematika dan IT</p>
                        </div>
                    </div>
                    
                    <div class="flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                        <i class="fas fa-home text-orange-500 text-xl"></i>
                        <div>
                            <p class="text-sm text-gray-600 dark:text-gray-300">Alamat Rumah</p>
                            <p class="font-semibold text-gray-800 dark:text-white">Blok A22 Mutiara Kunir Residence, Kunir Lor</p>
                        </div>
                    </div>
                </div>
                
                <!-- CV Button -->
                <div class="mt-6 pt-4 border-t border-gray-200 dark:border-gray-600">
                    <a href="https://idt.community.or.id/cv-ferilee" target="_blank"
                        class="w-full bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white py-3 px-4 rounded-lg transition-all duration-300 font-medium flex items-center justify-center space-x-2">
                        <i class="fas fa-file-alt"></i>
                        <span>Lihat CV Lengkap</span>
                        <i class="fas fa-external-link-alt text-sm"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Todo List Modal -->
    <div id="todoModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden transform transition-all">
            <div class="gradient-bg text-white p-6 rounded-t-xl">
                <div class="flex justify-between items-center">
                    <h3 class="text-xl font-bold">To-Do List</h3>
                    <button onclick="closeTodoModal()" class="text-white hover:text-gray-200">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            
            <div class="p-6 overflow-y-auto max-h-[calc(90vh-120px)]">
                <!-- Search and Add Task -->
                <div class="flex flex-col sm:flex-row gap-3 mb-6">
                    <div class="flex-1 relative">
                        <input type="text" id="todoSearch" placeholder="Cari tugas..."
                                class="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white">
                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                    </div>
                    <button onclick="showAddTodoForm()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-2">
                        <i class="fas fa-plus"></i>
                        <span>Tambah Tugas</span>
                    </button>
                </div>

                <!-- Add Task Form -->
                <div id="addTodoForm" class="hidden mb-6 p-4 bg-blue-50 dark:bg-blue-900 rounded-lg">
                    <div class="space-y-3">
                        <input type="text" id="newTodoText" placeholder="Masukkan tugas baru..."
                                class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white">
                        <select id="newTodoPriority" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white">
                            <option value="normal">Prioritas Normal</option>
                            <option value="high">Prioritas Tinggi</option>
                            <option value="urgent">Mendesak</option>
                        </select>
                        <input type="date" id="newTodoDueDate"
                                class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white">
                        <div class="flex space-x-2">
                            <button onclick="addNewTodo()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition-colors">
                                <i class="fas fa-check mr-2"></i>Simpan
                            </button>
                            <button onclick="hideAddTodoForm()" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors">
                                <i class="fas fa-times mr-2"></i>Batal
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Todo List -->
                <div class="space-y-3" id="todoList">
                    <!-- Todos will be populated by JavaScript -->
                </div>

                <!-- Empty State -->
                <div id="todoEmptyState" class="hidden text-center py-8 text-gray-500 dark:text-gray-400">
                    <i class="fas fa-tasks text-4xl mb-4"></i>
                    <p class="text-lg font-medium mb-2">Tidak ada tugas ditemukan</p>
                    <p class="text-sm">Tambah tugas baru atau ubah kata kunci pencarian</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Notes Modal -->
    <div id="notesModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden transform transition-all">
            <div class="gradient-bg text-white p-6 rounded-t-xl">
                <div class="flex justify-between items-center">
                    <h3 class="text-xl font-bold">Catatan Guru</h3>
                    <button onclick="closeNotesModal()" class="text-white hover:text-gray-200">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            
            <div class="p-6 overflow-y-auto max-h-[calc(90vh-120px)]">
                <!-- Search and Add Note -->
                <div class="flex flex-col sm:flex-row gap-3 mb-6">
                    <div class="flex-1 relative">
                        <input type="text" id="notesSearch" placeholder="Cari catatan..."
                                class="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white">
                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                    </div>
                    <select id="notesFilter" class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white">
                        <option value="">Semua Kategori</option>
                        <option value="pembelajaran">Pembelajaran</option>
                        <option value="siswa">Siswa</option>
                        <option value="administrasi">Administrasi</option>
                        <option value="rapat">Rapat</option>
                        <option value="lainnya">Lainnya</option>
                    </select>
                    <button onclick="showAddNoteForm()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-2">
                        <i class="fas fa-plus"></i>
                        <span>Tambah Catatan</span>
                    </button>
                </div>

                <!-- Add Note Form -->
                <div id="addNoteForm" class="hidden mb-6 p-4 bg-green-50 dark:bg-green-900 rounded-lg">
                    <div class="space-y-3">
                        <input type="text" id="newNoteTitle" placeholder="Judul catatan..."
                                class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white">
                        <select id="newNoteCategory" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white">
                            <option value="pembelajaran">Pembelajaran</option>
                            <option value="siswa">Siswa</option>
                            <option value="administrasi">Administrasi</option>
                            <option value="rapat">Rapat</option>
                            <option value="lainnya">Lainnya</option>
                        </select>
                        <textarea id="newNoteContent" placeholder="Isi catatan..."
                                   class="w-full h-32 p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white resize-none"></textarea>
                        <div class="flex space-x-2">
                            <button onclick="addNewNote()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition-colors">
                                <i class="fas fa-check mr-2"></i>Simpan
                            </button>
                            <button onclick="hideAddNoteForm()" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors">
                                <i class="fas fa-times mr-2"></i>Batal
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Notes List -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="notesList">
                    <!-- Notes will be populated by JavaScript -->
                </div>

                <!-- Empty State -->
                <div id="notesEmptyState" class="hidden text-center py-8 text-gray-500 dark:text-gray-400">
                    <i class="fas fa-sticky-note text-4xl mb-4"></i>
                    <p class="text-lg font-medium mb-2">Tidak ada catatan ditemukan</p>
                    <p class="text-sm">Tambah catatan baru atau ubah kata kunci pencarian</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Journal Modal -->
    <div id="journalModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden transform transition-all">
            <div class="gradient-bg text-white p-6 rounded-t-xl">
                <div class="flex justify-between items-center">
                    <h3 class="text-xl font-bold">Jurnal Mengajar</h3>
                    <button onclick="closeJournalModal()" class="text-white hover:text-gray-200">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            
            <div class="p-6 overflow-y-auto max-h-[calc(90vh-120px)]">
                <!-- Search and Add Journal -->
                <div class="flex flex-col sm:flex-row gap-3 mb-6">
                    <div class="flex-1 relative">
                        <input type="text" id="journalSearch" placeholder="Cari jurnal mengajar..."
                                class="w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white">
                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                    </div>
                    <select id="journalClassFilter" class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white">
                        <option value="">Semua Kelas</option>
                        <option value="X TKJ A">X TKJ A</option>
                        <option value="X TKJ B">X TKJ B</option>
                        <option value="XI RPL">XI RPL</option>
                        <option value="XI DPIB">XI DPIB</option>
                        <option value="XII TKJ A">XII TKJ A</option>
                        <option value="XII TKJ B">XII TKJ B</option>
                        <option value="X DPIB">X DPIB</option>
                    </select>
                    <button onclick="showAddJournalForm()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-2">
                        <i class="fas fa-plus"></i>
                        <span>Tambah Jurnal</span>
                    </button>
                </div>

                <!-- Add Journal Form -->
                <div id="addJournalForm" class="hidden mb-6 p-4 bg-blue-50 dark:bg-blue-900 rounded-lg">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="space-y-3">
                            <input type="date" id="newJournalDate"
                                    class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white">
                            <select id="newJournalClass" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white">
                                <option value="">Pilih Kelas</option>
                                <option value="X TKJ A">X TKJ A</option>
                                <option value="X TKJ B">X TKJ B</option>
                                <option value="XI RPL">XI RPL</option>
                                <option value="XI DPIB">XI DPIB</option>
                                <option value="XII TKJ A">XII TKJ A</option>
                                <option value="XII TKJ B">XII TKJ B</option>
                                <option value="X DPIB">X DPIB</option>
                            </select>
                            <input type="text" id="newJournalSubject" placeholder="Mata Pelajaran"
                                    class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white">
                            <input type="text" id="newJournalTime" placeholder="Jam Pelajaran (contoh: 07:00-08:30)"
                                    class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white">
                        </div>
                        <div class="space-y-3">
                            <input type="text" id="newJournalTopic" placeholder="Topik/Materi yang Diajarkan"
                                    class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white">
                            <textarea id="newJournalActivity" placeholder="Kegiatan Pembelajaran"
                                       class="w-full h-20 p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white resize-none"></textarea>
                            <textarea id="newJournalNotes" placeholder="Catatan Tambahan"
                                       class="w-full h-16 p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white resize-none"></textarea>
                        </div>
                    </div>
                    <div class="flex space-x-2 mt-4">
                        <button onclick="addNewJournal()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition-colors">
                            <i class="fas fa-check mr-2"></i>Simpan
                        </button>
                        <button onclick="hideAddJournalForm()" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors">
                            <i class="fas fa-times mr-2"></i>Batal
                        </button>
                    </div>
                </div>

                <!-- Journal List -->
                <div class="space-y-4" id="journalList">
                    <!-- Journals will be populated by JavaScript -->
                </div>

                <!-- Empty State -->
                <div id="journalEmptyState" class="hidden text-center py-8 text-gray-500 dark:text-gray-400">
                    <i class="fas fa-book text-4xl mb-4"></i>
                    <p class="text-lg font-medium mb-2">Tidak ada jurnal mengajar ditemukan</p>
                    <p class="text-sm">Tambah jurnal baru atau ubah kata kunci pencarian</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Capaian Pembelajaran Modal -->
    <div id="capaianModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden transform transition-all">
            <div class="gradient-bg text-white p-6 rounded-t-xl">
                <div class="flex justify-between items-center">
                    <h3 class="text-xl font-bold">Capaian Pembelajaran Matematika</h3>
                    <button onclick="closeCapaianModal()" class="text-white hover:text-gray-200">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            
            <div class="p-6 overflow-y-auto max-h-[calc(90vh-120px)]">
                <!-- Phase Tabs -->
                <div class="flex space-x-4 mb-6 border-b border-gray-200 dark:border-gray-600">
                    <button onclick="showCapaianTab('fase-e')" class="capaian-tab active px-4 py-2 font-semibold text-blue-600 border-b-2 border-blue-600" data-tab="fase-e">
                        Fase E (Kelas X)
                    </button>
                    <button onclick="showCapaianTab('fase-f')" class="capaian-tab px-4 py-2 font-semibold text-gray-600 dark:text-gray-300 hover:text-blue-600" data-tab="fase-f">
                        Fase F (Kelas XI)
                    </button>
                </div>

                <!-- Fase E Content -->
                <div id="capaian-fase-e" class="capaian-content">
                    <div class="mb-6">
                        <h4 class="text-lg font-bold text-gray-800 dark:text-white mb-2">Capaian Pembelajaran Fase E (Kelas X)</h4>
                        <p class="text-gray-600 dark:text-gray-300 text-sm mb-4">
                            Pada akhir Fase E, murid memiliki kemampuan sebagai berikut:
                        </p>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full border-collapse border border-gray-300 dark:border-gray-600">
                            <thead>
                                <tr class="bg-gray-50 dark:bg-gray-700">
                                    <th class="border border-gray-300 dark:border-gray-600 p-4 text-left font-semibold w-1/6">Elemen</th>
                                    <th class="border border-gray-300 dark:border-gray-600 p-4 text-left font-semibold">Capaian Pembelajaran</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                                    <td class="border border-gray-300 dark:border-gray-600 p-4 font-medium bg-blue-50 dark:bg-blue-900">
                                        <i class="fas fa-calculator text-blue-600 mr-2"></i>
                                        Bilangan
                                    </td>
                                    <td class="border border-gray-300 dark:border-gray-600 p-4">
                                        Menggeneralisasi sifat-sifat bilangan berpangkat (termasuk bilangan pangkat pecahan), dan menggunakannya untuk menyelesaikan masalah.
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                                    <td class="border border-gray-300 dark:border-gray-600 p-4 font-medium bg-green-50 dark:bg-green-900">
                                        <i class="fas fa-function text-green-600 mr-2"></i>
                                        Aljabar dan Fungsi
                                    </td>
                                    <td class="border border-gray-300 dark:border-gray-600 p-4">
                                        Menyelesaikan masalah yang berkaitan dengan sistem pertidaksamaan linear dua variabel; menyelesaikan masalah yang berkaitan dengan persamaan dan fungsi kuadrat (termasuk akar imajiner), serta persamaan eksponensial (berbasis/bilangan pokok sama) dan fungsi eksponensial.
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                                    <td class="border border-gray-300 dark:border-gray-600 p-4 font-medium bg-purple-50 dark:bg-purple-900">
                                        <i class="fas fa-shapes text-purple-600 mr-2"></i>
                                        Geometri
                                    </td>
                                    <td class="border border-gray-300 dark:border-gray-600 p-4">
                                        Mengaplikasikan perbandingan trigonometri (sinus, cosinus, tangen) dari sudut lancip.
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                                    <td class="border border-gray-300 dark:border-gray-600 p-4 font-medium bg-orange-50 dark:bg-orange-900">
                                        <i class="fas fa-chart-bar text-orange-600 mr-2"></i>
                                        Analisis Data dan Peluang
                                    </td>
                                    <td class="border border-gray-300 dark:border-gray-600 p-4">
                                        Merepresentasikan dan menginterpretasi data dengan cara menentukan jangkauan kuartil dan interkuartil; membuat dan menginterpretasi diagram box plot dan menggunakannya untuk membandingkan himpunan data; menentukan dan menggunakan dari box plot, histogram dan dot plot sesuai dengan natur (karakteristik) data dan kebutuhan; menggunakan diagram pencar untuk menyelidiki dan menjelaskan hubungan antara dua variabel numerik/kuantitatif (termasuk salah satunya variabel bebas berupa waktu); serta mengevaluasi laporan statistika di media berdasarkan tampilan, statistika dan representasi data, termasuk yang disajikan dalam bentuk matriks.
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Fase F Content -->
                <div id="capaian-fase-f" class="capaian-content hidden">
                    <div class="mb-6">
                        <h4 class="text-lg font-bold text-gray-800 dark:text-white mb-2">Capaian Pembelajaran Fase F (Kelas XI)</h4>
                        <p class="text-gray-600 dark:text-gray-300 text-sm mb-4">
                            Pada akhir Fase F, murid memiliki kemampuan sebagai berikut:
                        </p>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full border-collapse border border-gray-300 dark:border-gray-600">
                            <thead>
                                <tr class="bg-gray-50 dark:bg-gray-700">
                                    <th class="border border-gray-300 dark:border-gray-600 p-4 text-left font-semibold w-1/6">Elemen</th>
                                    <th class="border border-gray-300 dark:border-gray-600 p-4 text-left font-semibold">Capaian Pembelajaran</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                                    <td class="border border-gray-300 dark:border-gray-600 p-4 font-medium bg-blue-50 dark:bg-blue-900">
                                        <i class="fas fa-calculator text-blue-600 mr-2"></i>
                                        Bilangan
                                    </td>
                                    <td class="border border-gray-300 dark:border-gray-600 p-4">
                                        Menjelaskan barisan dan deret (aritmetika dan geometri), menerapkannya pada beragam masalah terutama masalah bunga tunggal dan majemuk, memodelkan pinjaman dan investasi dengan bunga majemuk dan anuitas, serta menyelidiki (secara numerik atau grafis) pengaruh masing-masing parameter (suku bunga, periode pembayaran) dalam model tersebut.
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                                    <td class="border border-gray-300 dark:border-gray-600 p-4 font-medium bg-green-50 dark:bg-green-900">
                                        <i class="fas fa-function text-green-600 mr-2"></i>
                                        Aljabar dan Fungsi
                                    </td>
                                    <td class="border border-gray-300 dark:border-gray-600 p-4">
                                        Menentukan fungsi invers, komposisi fungsi, dan transformasi fungsi untuk memodelkan situasi dunia nyata menggunakan fungsi yang sesuai (linear, kuadrat, eksponensial).
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                                    <td class="border border-gray-300 dark:border-gray-600 p-4 font-medium bg-purple-50 dark:bg-purple-900">
                                        <i class="fas fa-shapes text-purple-600 mr-2"></i>
                                        Geometri
                                    </td>
                                    <td class="border border-gray-300 dark:border-gray-600 p-4">
                                        Menerapkan, mengidentifikasi dan menjelaskan hubungan antara unsur-unsur lingkaran untuk menyelesaikan masalah.
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                                    <td class="border border-gray-300 dark:border-gray-600 p-4 font-medium bg-orange-50 dark:bg-orange-900">
                                        <i class="fas fa-chart-bar text-orange-600 mr-2"></i>
                                        Analisis Data dan Peluang
                                    </td>
                                    <td class="border border-gray-300 dark:border-gray-600 p-4">
                                        Melakukan proses penyelidikan statistika untuk mengidentifikasi dan menjelaskan asosiasi antara dua variabel kategorik (kualitatif) dan antara dua variabel numerikal (kuantitatif); memperkirakan model linear terbaik (best fit linear) pada data numerikal (kuantitatif); membedakan hubungan asosiasi dan sebab-akibat; menjelaskan peluang dan menentukan frekuensi harapan dari kejadian majemuk; menyelidiki konsep dari kejadian saling bebas dan saling lepas, dan menentukan peluangnya; serta memahami konsep peluang bersyarat dan kejadian yang saling bebas menggunakan konsep permutasi dan kombinasi.
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Materials Modal -->
    <div id="materialsModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden transform transition-all">
            <div class="gradient-bg text-white p-6 rounded-t-xl">
                <div class="flex justify-between items-center">
                    <h3 class="text-xl font-bold">Distribusi Materi Pembelajaran</h3>
                    <button onclick="closeMaterialsModal()" class="text-white hover:text-gray-200">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            
            <div class="p-6 overflow-y-auto max-h-[calc(90vh-120px)]">
                <!-- Class Tabs -->
                <div class="flex space-x-4 mb-6 border-b border-gray-200 dark:border-gray-600">
                    <button onclick="showMaterialsTab('class-x')" class="materials-tab active px-4 py-2 font-semibold text-blue-600 border-b-2 border-blue-600" data-tab="class-x">
                        Kelas X (Fase E)
                    </button>
                    <button onclick="showMaterialsTab('class-xi')" class="materials-tab px-4 py-2 font-semibold text-gray-600 dark:text-gray-300 hover:text-blue-600" data-tab="class-xi">
                        Kelas XI (Fase F)
                    </button>
                </div>

                <!-- Class X Materials -->
                <div id="materials-class-x" class="materials-content">
                    <div class="mb-6">
                        <h4 class="text-lg font-bold text-gray-800 dark:text-white mb-2">Kelas X (Fase E)</h4>
                        <p class="text-gray-600 dark:text-gray-300 text-sm mb-4">
                            Jumlah JP: 88 JP semester ganjil (22 minggu √ó 4 JP), 92 JP semester genap (23 minggu √ó 4 JP)
                        </p>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full border-collapse border border-gray-300 dark:border-gray-600">
                            <thead>
                                <tr class="bg-gray-50 dark:bg-gray-700">
                                    <th class="border border-gray-300 dark:border-gray-600 p-3 text-left font-semibold">Semester</th>
                                    <th class="border border-gray-300 dark:border-gray-600 p-3 text-left font-semibold">Minggu</th>
                                    <th class="border border-gray-300 dark:border-gray-600 p-3 text-left font-semibold">Topik</th>
                                    <th class="border border-gray-300 dark:border-gray-600 p-3 text-left font-semibold">Alokasi Waktu</th>
                                    <th class="border border-gray-300 dark:border-gray-600 p-3 text-left font-semibold">Fokus Materi</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                                    <td class="border border-gray-300 dark:border-gray-600 p-3 font-medium">Ganjil</td>
                                    <td class="border border-gray-300 dark:border-gray-600 p-3">1‚Äì6</td>
                                    <td class="border border-gray-300 dark:border-gray-600 p-3 font-medium">Eksponen & Pangkat Pecahan</td>
                                    <td class="border border-gray-300 dark:border-gray-600 p-3">6 minggu (24 JP)</td>
                                    <td class="border border-gray-300 dark:border-gray-600 p-3">Aturan eksponen, pangkat negatif & pecahan, aplikasi kontekstual</td>
                                </tr>
                                <!-- More rows for Class X materials -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Class XI Materials -->
                <div id="materials-class-xi" class="materials-content hidden">
                    <div class="mb-6">
                        <h4 class="text-lg font-bold text-gray-800 dark:text-white mb-2">Kelas XI (Fase F)</h4>
                        <p class="text-gray-600 dark:text-gray-300 text-sm mb-4">
                            Jumlah JP: 66 JP semester ganjil (22 minggu √ó 3 JP), 69 JP semester genap (23 minggu √ó 3 JP)
                        </p>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full border-collapse border border-gray-300 dark:border-gray-600">
                            <thead>
                                <tr class="bg-gray-50 dark:bg-gray-700">
                                    <th class="border border-gray-300 dark:border-gray-600 p-3 text-left font-semibold">Semester</th>
                                    <th class="border border-gray-300 dark:border-gray-600 p-3 text-left font-semibold">Minggu</th>
                                    <th class="border border-gray-300 dark:border-gray-600 p-3 text-left font-semibold">Topik</th>
                                    <th class="border border-gray-300 dark:border-gray-600 p-3 text-left font-semibold">Alokasi Waktu</th>
                                    <th class="border border-gray-300 dark:border-gray-600 p-3 text-left font-semibold">Fokus Materi</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                                    <td class="border border-gray-300 dark:border-gray-600 p-3 font-medium">Ganjil</td>
                                    <td class="border border-gray-300 dark:border-gray-600 p-3">1‚Äì4</td>
                                    <td class="border border-gray-300 dark:border-gray-600 p-3 font-medium">Barisan & Deret Aritmetika</td>
                                    <td class="border border-gray-300 dark:border-gray-600 p-3">4 minggu (12 JP)</td>
                                    <td class="border border-gray-300 dark:border-gray-600 p-3">Konsep barisan, deret aritmetika, aplikasi cicilan sederhana</td>
                                </tr>
                                <!-- More rows for Class XI materials -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Under Construction Modal -->
    <div id="underConstructionModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full transform transition-all">
            <div class="gradient-bg text-white p-6 rounded-t-xl">
                <div class="flex justify-between items-center">
                    <h3 class="text-xl font-bold" id="underConstructionTitle">Fitur Dalam Pengembangan</h3>
                    <button onclick="closeUnderConstructionModal()" class="text-white hover:text-gray-200">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            
            <div class="p-6 text-center">
                <div class="mb-6">
                    <i class="fas fa-tools text-6xl text-gray-400 mb-4"></i>
                    <h4 class="text-xl font-bold text-gray-800 dark:text-white mb-2">Sedang Dalam Pengembangan</h4>
                    <p class="text-gray-600 dark:text-gray-300" id="underConstructionFeature">Fitur ini</p>
                    <p class="text-gray-600 dark:text-gray-300">sedang dalam tahap pengembangan dan akan segera tersedia.</p>
                </div>
                
                <div class="bg-blue-50 dark:bg-blue-900 rounded-lg p-4 mb-6">
                    <div class="flex items-center justify-center space-x-2 text-blue-600 dark:text-blue-300">
                        <i class="fas fa-info-circle"></i>
                        <span class="font-medium">Informasi</span>
                    </div>
                    <p class="text-sm text-blue-700 dark:text-blue-200 mt-2">
                        Kami sedang bekerja keras untuk menghadirkan fitur terbaik untuk Anda. 
                        Terima kasih atas kesabaran Anda.
                    </p>
                </div>
                
                <button onclick="closeUnderConstructionModal()"
                         class="w-full bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white py-3 px-4 rounded-lg transition-all duration-300 font-medium">
                    <i class="fas fa-check mr-2"></i>Mengerti
                </button>
            </div>
        </div>
    </div>

    <!-- Create Course Modal -->
    <div id="createCourseModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
            <h3 class="text-xl font-bold text-gray-900 mb-4" id="createCourseModalTitle">Buat Kursus Baru</h3>
            <form id="createCourseForm">
                <input type="hidden" id="editCourseId">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Judul Kursus</label>
                        <input type="text" id="courseTitle" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Deskripsi</label>
                        <textarea id="courseDescription" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 h-24"></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Durasi (menit)</label>
                        <input type="number" id="courseDuration" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Konten Pembelajaran</label>
                        <textarea id="courseContent" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 h-32"></textarea>
                    </div>
                </div>
                <div class="flex justify-end space-x-3 mt-6">
                    <button type="button" onclick="hideCreateCourse()" class="px-4 py-2 text-gray-600 hover:text-gray-800">
                        Batal
                    </button>
                    <button type="submit" class="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition">
                        <span id="createCourseButtonText">Buat Kursus</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Course Detail Modal -->
    <div id="courseDetailModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-8 max-w-2xl w-full mx-4 max-h-96 overflow-y-auto">
            <div class="flex justify-between items-start mb-4">
                <h3 id="detailTitle" class="text-xl font-bold text-gray-900"></h3>
                <button onclick="hideCourseDetail()" class="text-gray-400 hover:text-gray-600">
                    <span class="text-2xl">&times;</span>
                </button>
            </div>
            <div id="detailContent" class="space-y-4">
                <!-- Course content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Prayer Attendance Modal -->
<div id="prayerAttendanceModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-6xl w-full max-h-[95vh] overflow-hidden transform transition-all">
        <div class="gradient-bg text-white p-6 rounded-t-xl">
            <div class="flex justify-between items-center">
                <h3 class="text-xl font-bold">üïå Presensi Kehadiran Sholat</h3>
                <button onclick="closePrayerAttendanceModal()" class="text-white hover:text-gray-200">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
        </div>
        
        <div class="p-6 overflow-y-auto max-h-[calc(95vh-120px)]">
            <!-- Teacher Info -->
            <div class="bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900 dark:to-emerald-900 rounded-lg p-4 border border-green-200 dark:border-green-700 mb-6">
                <div class="flex items-center justify-center">
                    <img src="https://live.staticflickr.com/65535/54509797172_fa540c8b67_b.jpg"
                          alt="Foto Guru"
                          class="w-16 h-16 rounded-full object-cover border-4 border-white shadow-lg mr-4"
                         onerror="this.src=''; this.alt='Avatar tidak dapat dimuat'; this.style.display='none';">
                    <div class="text-center">
                        <h3 class="text-lg font-semibold text-gray-800 dark:text-white">üë®‚Äçüè´ Guru Pengampu</h3>
                        <p class="text-green-600 dark:text-green-400 font-medium">Feri Dwi Hermawan, S.Pd.</p>
                        <p class="text-sm text-gray-600 dark:text-gray-300">Kelas XI RPL - SMK Negeri Pasirian</p>
                    </div>
                </div>
            </div>

            <!-- Prayer Selection and Date -->
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 mb-6 border border-gray-200 dark:border-gray-700">
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3">Pilih Sholat:</label>
                        <select id="prayerSelect" class="w-full p-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:border-green-500 focus:outline-none transition-colors dark:bg-gray-700 dark:text-white">
                            <option value="">-- Pilih Sholat --</option>
                            <option value="dhuha">üåÖ Sholat Dhuha</option>
                            <option value="dhuhur">‚òÄÔ∏è Sholat Dhuhur</option>
                            <option value="ashar">üåá Sholat Ashar</option>
                            <option value="jumat">üïå Sholat Jum'at</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3">Tanggal:</label>
                        <input type="date" id="prayerAttendanceDate" class="w-full p-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:border-green-500 focus:outline-none transition-colors dark:bg-gray-700 dark:text-white">
                    </div>
                </div>
                
                <!-- Special Note for Jum'at -->
                <div id="prayerJumatNote" class="mt-4 p-4 bg-blue-50 dark:bg-blue-900 border border-blue-200 dark:border-blue-700 rounded-lg hidden">
                    <div class="flex items-start">
                        <span class="text-blue-500 text-xl mr-2">‚ÑπÔ∏è</span>
                        <div>
                            <h4 class="font-semibold text-blue-800 dark:text-blue-200">Catatan Sholat Jum'at</h4>
                            <p class="text-blue-700 dark:text-blue-300 text-sm">Sholat Jum'at hanya diwajibkan untuk siswa laki-laki. Siswa perempuan dapat mengisi sholat Dhuhur.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Student List -->
            <div id="prayerStudentList" class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800 dark:text-white">Daftar Siswa XI RPL</h2>
                    <div class="flex gap-2 flex-wrap">
                        <button onclick="markAllPrayerStatus('sholat')" class="bg-green-500 hover:bg-green-600 text-white px-3 py-2 rounded-lg transition-colors text-sm">
                            üïå Semua Sholat
                        </button>
                        <button onclick="markAllPrayerStatus('berhalangan')" class="bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-2 rounded-lg transition-colors text-sm">
                            üö´ Semua Berhalangan
                        </button>
                        <button onclick="markAllPrayerStatus('tidak_sholat')" class="bg-red-500 hover:bg-red-600 text-white px-3 py-2 rounded-lg transition-colors text-sm">
                            ‚ùå Semua Tidak Sholat
                        </button>
                    </div>
                </div>
                
                <!-- Loading State for Students -->
                <div id="prayerStudentsLoading" class="text-center py-8">
                    <div class="loading-spinner mb-4"></div>
                    <p class="text-gray-600 dark:text-gray-400">Memuat data siswa...</p>
                </div>
                
                <div id="prayerStudentsContainer" class="space-y-3 hidden">
                    <!-- Students will be loaded here -->
                </div>
                
                <!-- Summary -->
                <div class="mt-8 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                    <h3 class="font-semibold text-gray-700 dark:text-gray-300 mb-2">Ringkasan Kehadiran Sholat:</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3 text-center">
                        <div class="bg-green-100 dark:bg-green-900 p-3 rounded-lg">
                            <div class="text-xl font-bold text-green-600 dark:text-green-400" id="prayerSholatCount">0</div>
                            <div class="text-xs text-green-700 dark:text-green-300">Sholat</div>
                        </div>
                        <div class="bg-yellow-100 dark:bg-yellow-900 p-3 rounded-lg">
                            <div class="text-xl font-bold text-yellow-600 dark:text-yellow-400" id="prayerBerhalanganCount">0</div>
                            <div class="text-xs text-yellow-700 dark:text-yellow-300">Berhalangan</div>
                        </div>
                        <div class="bg-red-100 dark:bg-red-900 p-3 rounded-lg">
                            <div class="text-xl font-bold text-red-600 dark:text-red-400" id="prayerTidakSholatCount">0</div>
                            <div class="text-xs text-red-700 dark:text-red-300">Tidak Sholat</div>
                        </div>
                        <div class="bg-gray-100 dark:bg-gray-600 p-3 rounded-lg">
                            <div class="text-xl font-bold text-gray-600 dark:text-gray-300" id="prayerTotalCount">0</div>
                            <div class="text-xs text-gray-700 dark:text-gray-300">Total</div>
                        </div>
                    </div>
                </div>
                
                <!-- Submit Button -->
                <div class="mt-6 text-center">
                    <button onclick="validateAndSubmitPrayerAttendance()" class="bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-lg text-lg font-semibold transition-colors shadow-lg">
                        üíæ Simpan Kehadiran Sholat
                    </button>
                </div>
            </div>
            
            <!-- Success Message -->
            <div id="prayerSuccessMessage" class="hidden bg-green-100 dark:bg-green-900 border border-green-400 text-green-700 dark:text-green-300 px-4 py-3 rounded-lg mt-6">
                <div class="flex items-center">
                    <span class="text-xl mr-2">‚úÖ</span>
                    <span>Data kehadiran sholat berhasil disimpan!</span>
                </div>
            </div>
            
            <!-- Error Message -->
            <div id="prayerErrorMessage" class="hidden bg-red-100 dark:bg-red-900 border border-red-400 text-red-700 dark:text-red-300 px-4 py-3 rounded-lg mt-6">
                <div class="flex items-start">
                    <span class="text-xl mr-2">‚ùå</span>
                    <div>
                        <div class="font-semibold mb-2">Error:</div>
                        <div id="prayerErrorContent" class="text-sm"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Confirmation Modal for Prayer Attendance -->
<div id="prayerConfirmationModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="bg-white dark:bg-gray-800 rounded-xl p-6 max-w-md w-full mx-4">
        <div class="text-center mb-4">
            <div class="text-4xl mb-2">üïå</div>
            <h3 class="text-xl font-semibold text-gray-800 dark:text-white">Konfirmasi Penyimpanan</h3>
        </div>
        <p class="text-gray-600 dark:text-gray-300 mb-6 text-center" id="prayerConfirmationText">
            Anda akan menyimpan data kehadiran sholat. Pastikan data sudah benar sebelum melanjutkan.
        </p>
        <div class="flex gap-3">
            <button onclick="hidePrayerConfirmationModal()" class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 py-2 rounded-lg transition-colors">
                Batal
            </button>
            <button onclick="submitPrayerAttendance()" class="flex-1 bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg transition-colors">
                Ya, Simpan
            </button>
        </div>
    </div>
</div>

    <script>
        // Global state
        let currentUser = null;
        let courses = [];
        let editingCourseId = null;

        // Initialize data from localStorage
        function initializeData() {
            // Load users from localStorage
            const storedUsers = localStorage.getItem('simpel_users');
            if (!storedUsers) {
                // Create sample users if none exist (including demo accounts)
                const sampleUsers = [
                    { id: 1, name: "Guru Matematika", email: "guru@example.com", password: "password123", role: "guru", matpel: "Matematika", isDemo: true },
                    { id: 2, name: "Wali Kelas 1A", email: "wali@example.com", password: "password123", role: "wali_kelas", kelas_ampu: "1A", isDemo: true },
                    { id: 3, name: "Siswa Contoh", email: "siswa@example.com", password: "password123", role: "siswa", kelas: "1A", isDemo: true }
                ];
                localStorage.setItem('simpel_users', JSON.stringify(sampleUsers));
            }

            // Load courses from localStorage
            const storedCourses = localStorage.getItem('simpel_courses');
            if (!storedCourses) {
                // Create sample courses if none exist
                const sampleCourses = [
                    {
                        id: 1,
                        title: "Pengenalan Matematika Dasar",
                        description: "Kursus micro learning untuk memahami konsep dasar matematika dengan mudah",
                        duration: 15,
                        author: "Guru Matematika",
                        authorId: 1,
                        content: "Materi pembelajaran matematika dasar meliputi penjumlahan, pengurangan, perkalian, dan pembagian. Setiap konsep dijelaskan dengan contoh praktis dan latihan interaktif."
                    },
                    {
                        id: 2,
                        title: "Bahasa Indonesia untuk Pemula",
                        description: "Pembelajaran bahasa Indonesia yang menyenangkan dalam format bite-sized",
                        duration: 20,
                        author: "Guru Bahasa",
                        authorId: 1,
                        content: "Pelajari tata bahasa Indonesia, kosakata, dan cara menulis yang baik dan benar. Materi disajikan dengan contoh-contoh menarik dari kehidupan sehari-hari."
                    },
                    {
                        id: 3,
                        title: "IPA - Ekosistem dan Lingkungan",
                        description: "Memahami hubungan antara makhluk hidup dan lingkungannya",
                        duration: 25,
                        author: "Guru IPA",
                        authorId: 1,
                        content: "Materi tentang ekosistem, rantai makanan, dan pentingnya menjaga kelestarian lingkungan hidup untuk keberlangsungan kehidupan di bumi."
                    }
                ];
                localStorage.setItem('simpel_courses', JSON.stringify(sampleCourses));
                courses = [...sampleCourses];
            } else {
                courses = JSON.parse(storedCourses);
            }
        }

        // Toast notification function
        function showToast(message, type = 'info') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = `toast ${type} show`;
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Demo login function
        function loginDemo(email, password) {
            document.getElementById('loginEmail').value = email;
            document.getElementById('loginPassword').value = password;
            
            // Trigger form submission
            document.getElementById('loginForm').dispatchEvent(new Event('submit'));
        }

        // Navigation functions
        function showLanding() {
            hideAllPages();
            document.getElementById('landingPage').classList.remove('hidden');
        }

        function showRegister() {
            hideAllPages();
            document.getElementById('registerPage').classList.remove('hidden');
            
            // Add animation when register page is shown
            const formCard = document.querySelector('#registerPage .form-card');
            if (formCard) {
                formCard.style.opacity = '0';
                formCard.style.transform = 'translateY(20px)';
                
                setTimeout(() => {
                    formCard.style.transition = 'all 0.6s ease';
                    formCard.style.opacity = '1';
                    formCard.style.transform = 'translateY(0)';
                }, 100);
            }
        }

        function showLogin() {
            hideAllPages();
            document.getElementById('loginPage').classList.remove('hidden');
            
            // Add animation when login page is shown
            const formCard = document.querySelector('#loginPage .form-card');
            if (formCard) {
                formCard.style.opacity = '0';
                formCard.style.transform = 'translateY(20px)';
                
                setTimeout(() => {
                    formCard.style.transition = 'all 0.6s ease';
                    formCard.style.opacity = '1';
                    formCard.style.transform = 'translateY(0)';
                }, 100);
            }
        }

        function hideAllPages() {
            const pages = ['landingPage', 'registerPage', 'loginPage', 'guruDashboard', 'waliKelasDashboard', 'siswaDashboard'];
            pages.forEach(page => {
                document.getElementById(page).classList.add('hidden');
            });
        }

        // Toggle password visibility for login
        function togglePassword() {
            const passwordInput = document.getElementById('loginPassword');
            const eyeIcon = document.getElementById('eyeIcon');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                eyeIcon.innerHTML = `
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM4.332 8.027a6.012 6.012 0 011.912-2.706C6.512 5.73 6.974 6 7.5 6A1.5 1.5 0 019 7.5V8a2 2 0 004 0v-.5C13 6.974 13.27 6.512 13.679 6.244a6.012 6.012 0 011.912 2.706A8.037 8.037 0 0110 14a8.037 8.037 0 01-5.668-5.973z" clip-rule="evenodd"></path>
                `;
            } else {
                passwordInput.type = 'password';
                eyeIcon.innerHTML = `
                    <path fill-rule="evenodd" d="M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z" clip-rule="evenodd"></path>
                    <path d="M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z"></path>
                `;
            }
        }

        // Toggle password visibility for register
        function toggleRegisterPassword() {
            const passwordInput = document.getElementById('regPassword');
            const eyeIcon = document.getElementById('regEyeIcon');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                eyeIcon.innerHTML = `
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM4.332 8.027a6.012 6.012 0 011.912-2.706C6.512 5.73 6.974 6 7.5 6A1.5 1.5 0 019 7.5V8a2 2 0 004 0v-.5C13 6.974 13.27 6.512 13.679 6.244a6.012 6.012 0 011.912 2.706A8.037 8.037 0 0110 14a8.037 8.037 0 01-5.668-5.973z" clip-rule="evenodd"></path>
                `;
            } else {
                passwordInput.type = 'password';
                eyeIcon.innerHTML = `
                    <path fill-rule="evenodd" d="M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z" clip-rule="evenodd"></path>
                    <path d="M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z"></path>
                `;
            }
        }

        // Registration form handling
        document.getElementById('regRole').addEventListener('change', function() {
            const role = this.value;
            const additionalFields = document.getElementById('additionalFields');
            
            if (role === 'siswa') {
                additionalFields.innerHTML = `
                    <div class="input-container">
                        <select 
                            id="regKelas" 
                            class="custom-select w-full px-4 py-3 border-2 rounded-lg focus:outline-none transition-all duration-300"
                            required
                        >
                            <option value="" class="text-gray-600">Pilih Kelas</option>
                            <option value="1A">1A</option>
                            <option value="1B">1B</option>
                            <option value="2A">2A</option>
                            <option value="2B">2B</option>
                            <option value="3A">3A</option>
                            <option value="3B">3B</option>
                        </select>
                        <label for="regKelas" class="floating-label">Kelas</label>
                    </div>
                `;
            } else if (role === 'wali_kelas') {
                additionalFields.innerHTML = `
                    <div class="input-container">
                        <select 
                            id="regKelasAmpu" 
                            class="custom-select w-full px-4 py-3 border-2 rounded-lg focus:outline-none transition-all duration-300"
                            required
                        >
                            <option value="" class="text-gray-600">Pilih Kelas</option>
                            <option value="1A">1A</option>
                            <option value="1B">1B</option>
                            <option value="2A">2A</option>
                            <option value="2B">2B</option>
                            <option value="3A">3A</option>
                            <option value="3B">3B</option>
                        </select>
                        <label for="regKelasAmpu" class="floating-label">Kelas yang Diampu</label>
                    </div>
                `;
            } else if (role === 'guru') {
                additionalFields.innerHTML = `
                    <div class="input-container">
                        <input 
                            type="text" 
                            id="regMatpel"
                            class="input-field w-full px-4 py-3 border-2 rounded-lg focus:outline-none transition-all duration-300"
                            placeholder=" "
                            required
                        >
                        <label for="regMatpel" class="floating-label">Mata Pelajaran</label>
                    </div>
                `;
            } else {
                additionalFields.innerHTML = '';
            }
        });

        // Registration form submission
        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const submitButton = this.querySelector('button[type="submit"]');
            const originalText = submitButton.textContent;
            submitButton.textContent = 'Mendaftar...';
            submitButton.disabled = true;
            
            const name = document.getElementById('regName').value;
            const email = document.getElementById('regEmail').value;
            const password = document.getElementById('regPassword').value;
            const role = document.getElementById('regRole').value;
            const messageDiv = document.getElementById('registerMessage');
            
            if (!name || !email || !password || !role) {
                messageDiv.className = 'mt-4 p-3 rounded-lg bg-red-100 border border-red-400 text-red-700';
                messageDiv.textContent = 'Mohon isi semua kolom yang diperlukan.';
                messageDiv.classList.remove('hidden');
                submitButton.textContent = originalText;
                submitButton.disabled = false;
                return;
            }
            
            // Check if email already exists
            const users = JSON.parse(localStorage.getItem('simpel_users') || '[]');
            const existingUser = users.find(user => user.email === email);
            
            if (existingUser) {
                messageDiv.className = 'mt-4 p-3 rounded-lg bg-red-100 border border-red-400 text-red-700';
                messageDiv.textContent = 'Email sudah terdaftar!';
                messageDiv.classList.remove('hidden');
                showToast('Email sudah terdaftar!', 'error');
                submitButton.textContent = originalText;
                submitButton.disabled = false;
                return;
            }
            
            // Create new user object
            const newUser = {
                id: Date.now(),
                name,
                email,
                password,
                role,
                isDemo: false
            };
            
            // Add role-specific data
            if (role === 'siswa' && document.getElementById('regKelas')) {
                newUser.kelas = document.getElementById('regKelas').value;
            } else if (role === 'wali_kelas' && document.getElementById('regKelasAmpu')) {
                newUser.kelas_ampu = document.getElementById('regKelasAmpu').value;
            } else if (role === 'guru' && document.getElementById('regMatpel')) {
                newUser.matpel = document.getElementById('regMatpel').value;
            }
            
            // Save user to localStorage
            users.push(newUser);
            localStorage.setItem('simpel_users', JSON.stringify(users));
            
            messageDiv.className = 'mt-4 p-3 rounded-lg bg-green-100 border border-green-400 text-green-700';
            messageDiv.textContent = '‚úÖ Pendaftaran berhasil! Mengarahkan ke halaman login...';
            messageDiv.classList.remove('hidden');
            showToast('Pendaftaran berhasil! Silakan masuk.', 'success');
            
            submitButton.textContent = 'Mengarahkan...';
            
            // Redirect to login after 2 seconds
            setTimeout(() => {
                this.reset();
                document.getElementById('additionalFields').innerHTML = '';
                showLogin();
            }, 2000);
        });

        // Login form submission
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const submitButton = this.querySelector('button[type="submit"]');
            const originalText = submitButton.textContent;
            submitButton.textContent = 'Masuk...';
            submitButton.disabled = true;
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const messageDiv = document.getElementById('loginMessage');
            
            if (!email || !password) {
                messageDiv.className = 'mt-4 p-3 rounded-lg bg-red-100 border border-red-400 text-red-700';
                messageDiv.textContent = 'Mohon isi semua kolom yang diperlukan.';
                messageDiv.classList.remove('hidden');
                submitButton.textContent = originalText;
                submitButton.disabled = false;
                return;
            }
            
            // Show loading state
            messageDiv.className = 'mt-4 p-3 rounded-lg bg-blue-100 border border-blue-400 text-blue-700';
            messageDiv.textContent = 'üîó Memeriksa kredensial...';
            messageDiv.classList.remove('hidden');
            
            // Find user in localStorage
            const users = JSON.parse(localStorage.getItem('simpel_users') || '[]');
            const user = users.find(u => u.email === email && u.password === password);
            
            if (user) {
                currentUser = user;
                this.reset();
                
                if (user.isDemo) {
                    messageDiv.className = 'mt-4 p-3 rounded-lg bg-yellow-100 border border-yellow-400 text-yellow-700';
                    messageDiv.textContent = `üéÆ Mode Demo! Selamat datang, ${user.name}`;
                    showToast(`Mode Demo Aktif! Selamat datang, ${user.name}`, 'info');
                } else {
                    messageDiv.className = 'mt-4 p-3 rounded-lg bg-green-100 border border-green-400 text-green-700';
                    messageDiv.textContent = `‚úÖ Login berhasil! Selamat datang, ${user.name}`;
                    showToast(`Selamat datang, ${user.name}!`, 'success');
                }
                
                submitButton.textContent = 'Mengarahkan ke dashboard...';
                
                // Redirect to dashboard after 2 seconds
                setTimeout(() => {
                    showDashboard(user.role);
                }, 2000);
            } else {
                messageDiv.className = 'mt-4 p-3 rounded-lg bg-red-100 border border-red-400 text-red-700';
                messageDiv.textContent = '‚ùå Email atau password salah!';
                showToast('Email atau password salah!', 'error');
                
                submitButton.textContent = originalText;
                submitButton.disabled = false;
            }
        });

        function showDashboard(role) {
            hideAllPages();
            
            if (role === 'guru') {
                document.getElementById('guruDashboard').classList.remove('hidden');
                document.getElementById('guruNameDisplay').textContent = currentUser.name;
                document.getElementById('guruWelcome').textContent = `Selamat Datang, ${currentUser.name}!`;
                
                // Initialize guru dashboard
                initializeGuruDashboard();
                
                // Show demo badge if it's a demo account
                if (currentUser.isDemo) {
                    document.querySelector('#guruDashboard .demo-badge').classList.remove('hidden');
                }
                
                loadGuruCourses();
            } else if (role === 'wali_kelas') {
                document.getElementById('waliKelasDashboard').classList.remove('hidden');
                document.getElementById('waliName').textContent = `Selamat datang, ${currentUser.name}!`;
                
                // Show demo badge if it's a demo account
                if (currentUser.isDemo) {
                    document.querySelector('#waliKelasDashboard .demo-badge').classList.remove('hidden');
                }
                
                loadWaliCourses();
            } else if (role === 'siswa') {
                document.getElementById('siswaDashboard').classList.remove('hidden');
                document.getElementById('siswaName').textContent = `Selamat datang, ${currentUser.name}!`;
                
                // Show demo badge if it's a demo account
                if (currentUser.isDemo) {
                    document.querySelector('#siswaDashboard .demo-badge').classList.remove('hidden');
                }
                
                loadSiswaCourses();
            }
        }

        function logout() {
            currentUser = null;
            showLanding();
            showToast('Anda telah keluar.', 'info');
        }

        // Guru Dashboard Functions
        function initializeGuruDashboard() {
            // Dark mode functionality
            const darkModeToggle = document.getElementById('darkModeToggle');
            const html = document.documentElement;
            
            // Check for saved dark mode preference
            if (localStorage.getItem('darkMode') === 'true') {
                html.classList.add('dark');
            }
            
            darkModeToggle.addEventListener('click', () => {
                html.classList.toggle('dark');
                localStorage.setItem('darkMode', html.classList.contains('dark'));
            });

            // Sidebar toggle for mobile
            const sidebarToggle = document.getElementById('sidebarToggle');
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('overlay');
            
            sidebarToggle.addEventListener('click', () => {
                sidebar.classList.toggle('-translate-x-full');
                overlay.classList.toggle('hidden');
            });
            
            overlay.addEventListener('click', () => {
                sidebar.classList.add('-translate-x-full');
                overlay.classList.add('hidden');
            });

            // Initialize date and time
            updateDateTime();
            setInterval(updateDateTime, 1000);

            // Initialize schedule and activities
            generateScheduleCards();
            generateTodaySchedule();
            generateUpcomingActivities();

            // Initialize students data
            loadStudentsData();

            // Initialize todo and notes
            updateTodoCount();
            renderTodos();
            renderNotes();
        }

        function showGuruPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.guru-page-content').forEach(page => {
                page.classList.add('hidden');
            });
            
            // Show selected page
            document.getElementById(`guru-page-${pageId}`).classList.remove('hidden');
            
            // Update sidebar active state
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelector(`[data-page="${pageId}"]`).classList.add('active');
            
            // Close sidebar on mobile
            if (window.innerWidth < 1024) {
                document.getElementById('sidebar').classList.add('-translate-x-full');
                document.getElementById('overlay').classList.add('hidden');
            }
        }

        function updateDateTime() {
            const now = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            };
            const dateStr = now.toLocaleDateString('id-ID', options);
            const timeStr = now.toLocaleTimeString('id-ID');
            
            document.getElementById('currentDate').textContent = dateStr;
            document.getElementById('currentTime').textContent = timeStr;
        }

        // Schedule data
        const scheduleData = {
            'Senin': [
                { time: '09:00-09:40', subject: 'Matematika', class: 'X TKJ A', color: 'bg-blue-500' },
                { time: '09:55-10:35', subject: 'Matematika', class: 'X TKJ A', color: 'bg-blue-500' },
                { time: '13:05-13:45', subject: 'Matematika', class: 'XII TKJ B', color: 'bg-orange-500' },
                { time: '13:45-14:25', subject: 'Matematika', class: 'XII TKJ B', color: 'bg-orange-500' },
                { time: '14:25-15:05', subject: 'Matematika', class: 'XII TKJ B', color: 'bg-orange-500' }
            ],
            'Selasa': [
                { time: '07:15-07:55', subject: 'Matematika', class: 'XI RPL', color: 'bg-green-500' },
                { time: '07:55-08:35', subject: 'Matematika', class: 'XI RPL', color: 'bg-green-500' },
                { time: '13:30-14:15', subject: 'Matematika', class: 'X DPIB', color: 'bg-red-500' },
                { time: '14:15-14:40', subject: 'Matematika', class: 'X DPIB', color: 'bg-red-500' }
            ],
            'Rabu': [
                { time: '07:15-07:55', subject: 'Matematika', class: 'X TKJ A', color: 'bg-blue-500' },
                { time: '07:55-08:35', subject: 'Matematika', class: 'X TKJ A', color: 'bg-blue-500' },
                { time: '11:20-11:55', subject: 'Matematika', class: 'XI RPL', color: 'bg-green-500' },
                { time: '12:20-12:55', subject: 'Matematika', class: 'X TKJ B', color: 'bg-blue-500' },
                { time: '12:55-13:30', subject: 'Matematika', class: 'X TKJ B', color: 'bg-blue-500' },
                { time: '13:30-14:15', subject: 'Matematika', class: 'X TKJ B', color: 'bg-blue-500' },
                { time: '14:15-14:40', subject: 'Matematika', class: 'X DPIB', color: 'bg-red-500' },
                { time: '14:40-15:10', subject: 'Matematika', class: 'X DPIB', color: 'bg-red-500' }
            ],
            'Kamis': [
                { time: '07:15-09:55', subject: 'MPP', class: 'XII TKJ A', color: 'bg-orange-500' },
                { time: '10:05-10:45', subject: 'Matematika', class: 'XI DPIB', color: 'bg-purple-500' },
                { time: '10:45-11:25', subject: 'Matematika', class: 'XI DPIB', color: 'bg-purple-500' },
                { time: '11:25-12:05', subject: 'Matematika', class: 'XI DPIB', color: 'bg-purple-500' },
                { time: '12:30-13:10', subject: 'Matematika', class: 'X TKJ B', color: 'bg-blue-500' }
            ],
            'Jumat': [
                { time: '08:35-09:15', subject: 'Matematika', class: 'XII TKJ A', color: 'bg-orange-500' },
                { time: '09:35-10:15', subject: 'Matematika', class: 'XII TKJ A', color: 'bg-orange-500' },
                { time: '10:15-10:55', subject: 'Matematika', class: 'XII TKJ A', color: 'bg-orange-500' }
            ]
        };

        function generateScheduleCards() {
            const container = document.getElementById('scheduleCards');
            const today = new Date().toLocaleDateString('id-ID', { weekday: 'long' });
            const days = ['Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat'];
            
            container.innerHTML = days.map(day => {
                const daySchedule = scheduleData[day] || [];
                const isToday = day === today;
                
                // Calculate total teaching hours for the day
                const totalHours = daySchedule.length;
                
                return `
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 card-hover ${isToday ? 'ring-2 ring-blue-500 bg-blue-50 dark:bg-blue-900' : ''}">
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center space-x-2">
                                <div class="${isToday ? 'bg-blue-500' : 'bg-gray-500'} p-1.5 rounded">
                                    <i class="fas fa-calendar text-white text-sm"></i>
                                </div>
                                <div>
                                    <h3 class="text-base font-bold text-gray-800 dark:text-white">${day}</h3>
                                    ${isToday ? '<span class="text-xs bg-blue-500 text-white px-1.5 py-0.5 rounded-full">Hari Ini</span>' : ''}
                                </div>
                            </div>
                            <div class="text-right">
                                <p class="text-sm font-semibold text-gray-800 dark:text-white">${totalHours} JP</p>
                            </div>
                        </div>
                        
                        <div class="space-y-2">
                            ${daySchedule.length === 0 ? 
                                '<div class="text-center py-6 text-gray-500 dark:text-gray-400"><i class="fas fa-calendar-times text-lg mb-1"></i><p class="text-sm">Tidak ada jadwal</p></div>' :
                                daySchedule.map(item => {
                                    const currentTime = new Date();
                                    const currentHour = currentTime.getHours();
                                    const currentMinute = currentTime.getMinutes();
                                    const currentTimeInMinutes = currentHour * 60 + currentMinute;
                                    
                                    const [startTime, endTime] = item.time.split('-');
                                    const [startHour, startMinute] = startTime.split(':').map(Number);
                                    const [endHour, endMinute] = endTime.split(':').map(Number);
                                    const startTimeInMinutes = startHour * 60 + startMinute;
                                    const endTimeInMinutes = endHour * 60 + endMinute;
                                    
                                    let status = '';
                                    let statusClass = '';
                                    
                                    if (isToday) {
                                        if (currentTimeInMinutes >= startTimeInMinutes && currentTimeInMinutes <= endTimeInMinutes) {
                                            status = 'Live';
                                            statusClass = 'border-l-3 border-green-500';
                                        } else if (currentTimeInMinutes > endTimeInMinutes) {
                                            status = 'Done';
                                            statusClass = 'border-l-3 border-gray-400 opacity-60';
                                        } else {
                                            status = 'Next';
                                            statusClass = 'border-l-3 border-blue-500';
                                        }
                                    }
                                    
                                    return `
                                        <div class="${item.color} text-white p-3 rounded ${statusClass} transition-all">
                                            <div class="flex items-center justify-between mb-1">
                                                <span class="font-medium text-xs">${item.time}</span>
                                                ${status ? `<span class="text-xs bg-white bg-opacity-25 px-1.5 py-0.5 rounded">${status}</span>` : ''}
                                            </div>
                                            <div class="font-semibold text-sm mb-0.5">${item.subject}</div>
                                            <div class="text-xs opacity-90">${item.class}</div>
                                        </div>
                                    `;
                                }).join('')
                            }
                        </div>
                        
                        ${daySchedule.length > 0 ? `
                            <div class="mt-3 pt-2 border-t border-gray-200 dark:border-gray-600">
                                <div class="flex items-center justify-between text-xs text-gray-600 dark:text-gray-300">
                                    <span>
                                        <i class="fas fa-clock mr-1"></i>
                                        ${daySchedule[0].time.split('-')[0]} - ${daySchedule[daySchedule.length - 1].time.split('-')[1]}
                                    </span>
                                    <span>
                                        ${new Set(daySchedule.map(item => item.class)).size} kelas
                                    </span>
                                </div>
                            </div>
                        ` : ''}
                    </div>
                `;
            }).join('');
        }

        function generateTodaySchedule() {
            const container = document.getElementById('todaySchedule');
            const today = new Date().toLocaleDateString('id-ID', { weekday: 'long' });
            const todaySchedule = scheduleData[today] || [];
            
            if (todaySchedule.length === 0) {
                container.innerHTML = '<p class="text-gray-500 dark:text-gray-400 text-center py-4">Tidak ada jadwal hari ini</p>';
                return;
            }
            
            const currentTime = new Date();
            const currentHour = currentTime.getHours();
            const currentMinute = currentTime.getMinutes();
            const currentTimeInMinutes = currentHour * 60 + currentMinute;
            
            container.innerHTML = todaySchedule.map(item => {
                const [startTime] = item.time.split('-');
                const [startHour, startMinute] = startTime.split(':').map(Number);
                const startTimeInMinutes = startHour * 60 + startMinute;
                
                let status = 'Akan Datang';
                let statusColor = 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200';
                
                if (currentTimeInMinutes >= startTimeInMinutes && currentTimeInMinutes <= startTimeInMinutes + 45) {
                    status = 'Sedang Berlangsung';
                    statusColor = 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200';
                } else if (currentTimeInMinutes > startTimeInMinutes + 45) {
                    status = 'Selesai';
                    statusColor = 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200';
                }
                
                return `
                    <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                        <div class="flex items-center space-x-3">
                            <div class="${item.color} w-4 h-4 rounded"></div>
                            <div>
                                <p class="font-semibold text-gray-800 dark:text-white">${item.subject}</p>
                                <p class="text-sm text-gray-600 dark:text-gray-300">${item.class} ‚Ä¢ ${item.time}</p>
                            </div>
                        </div>
                        <span class="px-2 py-1 rounded-full text-xs font-medium ${statusColor}">${status}</span>
                    </div>
                `;
            }).join('');
        }

        // Academic activities data
        const academicActivities = [
            { name: 'Awal Masuk/Permulaan Tahun Ajaran', date: new Date('2025-07-14'), icon: 'fas fa-play-circle', type: 'start' },
            { name: 'MPLS & MOK HUT RI', date: new Date('2025-07-14'), icon: 'fas fa-users', type: 'meeting' },
            { name: 'Maulud Nabi Muhammad SAW', date: new Date('2025-09-05'), icon: 'fas fa-mosque', type: 'holiday' },
            { name: 'Tes Kompetensi Akademik (TKA)', date: new Date('2025-11-01'), icon: 'fas fa-clipboard-check', type: 'exam' },
            { name: 'Hari Raya Natal', date: new Date('2025-12-25'), icon: 'fas fa-tree', type: 'holiday' },
            { name: 'Libur Semester Ganjil', date: new Date('2025-12-22'), icon: 'fas fa-gift', type: 'holiday' },
            { name: 'Tahun Baru Masehi', date: new Date('2026-01-01'), icon: 'fas fa-calendar', type: 'holiday' },
            { name: 'Awal Masuk Semester Genap', date: new Date('2026-01-02'), icon: 'fas fa-play-circle', type: 'start' },
            { name: 'Isra Mi\'raj', date: new Date('2026-01-16'), icon: 'fas fa-mosque', type: 'holiday' },
            { name: 'Tahun Baru Imlek', date: new Date('2026-02-17'), icon: 'fas fa-dragon', type: 'holiday' },
            { name: 'PSAJ (Penilaian Asesmen Akhir Jenjang)', date: new Date('2026-03-09'), icon: 'fas fa-certificate', type: 'exam' },
            { name: 'Hari Raya Nyepi', date: new Date('2026-03-19'), icon: 'fas fa-om', type: 'holiday' },
            { name: 'Hari Raya Idul Fitri', date: new Date('2026-03-20'), icon: 'fas fa-moon', type: 'holiday' },
            { name: 'Wafatnya Isa Almasih', date: new Date('2026-04-03'), icon: 'fas fa-cross', type: 'holiday' },
            { name: 'Hari Buruh', date: new Date('2026-05-01'), icon: 'fas fa-hammer', type: 'holiday' },
            { name: 'Kenaikan Isa Almasih', date: new Date('2026-05-14'), icon: 'fas fa-cross', type: 'holiday' },
            { name: 'Idul Adha', date: new Date('2026-05-27'), icon: 'fas fa-mosque', type: 'holiday' },
            { name: 'Hari Waisak', date: new Date('2026-05-31'), icon: 'fas fa-lotus', type: 'holiday' },
            { name: 'Hari Lahir Pancasila', date: new Date('2026-06-01'), icon: 'fas fa-flag', type: 'holiday' },
            { name: 'Tahun Baru Islam', date: new Date('2026-06-17'), icon: 'fas fa-calendar-alt', type: 'holiday' },
            { name: 'Penyerahan Rapor Semester Genap', date: new Date('2026-06-20'), icon: 'fas fa-file-alt', type: 'exam' },
            { name: 'Libur Pembelajaran Akhir Tahun Ajaran', date: new Date('2026-06-23'), icon: 'fas fa-gift', type: 'holiday' }
        ];

        function generateUpcomingActivities() {
            const container = document.getElementById('upcomingActivities');
            const today = new Date();
            
            // Filter and sort activities
            const upcomingActivities = academicActivities
                .filter(activity => activity.date >= today)
                .sort((a, b) => a.date - b.date)
                .slice(0, 4);
            
            if (upcomingActivities.length === 0) {
                container.innerHTML = '<p class="text-gray-500 dark:text-gray-400 text-center py-4">Tidak ada kegiatan mendatang</p>';
                return;
            }
            
            container.innerHTML = upcomingActivities.map(activity => {
                const daysDiff = Math.ceil((activity.date - today) / (1000 * 60 * 60 * 24));
                
                let timeLabel = '';
                let labelColor = '';
                
                if (daysDiff === 0) {
                    timeLabel = 'Hari ini';
                    labelColor = 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200';
                } else if (daysDiff === 1) {
                    timeLabel = 'Besok';
                    labelColor = 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200';
                } else if (daysDiff <= 7) {
                    timeLabel = `${daysDiff} hari lagi`;
                    labelColor = 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200';
                } else if (daysDiff <= 30) {
                    const weeks = Math.ceil(daysDiff / 7);
                    timeLabel = weeks === 1 ? '1 minggu lagi' : `${weeks} minggu lagi`;
                    labelColor = 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200';
                } else {
                    const months = Math.ceil(daysDiff / 30);
                    timeLabel = months === 1 ? '1 bulan lagi' : `${months} bulan lagi`;
                    labelColor = 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200';
                }
                
                const typeColors = {
                    'exam': 'text-red-500',
                    'meeting': 'text-blue-500',
                    'workshop': 'text-green-500',
                    'holiday': 'text-purple-500',
                    'start': 'text-orange-500'
                };
                
                const formattedDate = activity.date.toLocaleDateString('id-ID', {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
                
                return `
                    <div class="flex items-start justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors cursor-pointer">
                        <div class="flex items-start space-x-3">
                            <i class="${activity.icon} ${typeColors[activity.type]} text-lg mt-1"></i>
                            <div>
                                <p class="font-semibold text-gray-800 dark:text-white text-sm">${activity.name}</p>
                                <p class="text-xs text-gray-600 dark:text-gray-300">${formattedDate}</p>
                            </div>
                        </div>
                        <span class="px-2 py-1 rounded-full text-xs font-medium ${labelColor} whitespace-nowrap">${timeLabel}</span>
                    </div>
                `;
            }).join('');
        }

        // Students data management
        let studentsData = [];
        let currentPage = 1;
        const itemsPerPage = 10;
        let filteredStudents = [];

        async function loadStudentsData() {
            try {
                // Fallback data if CSV fails to load
                studentsData = [
                    { name: 'Ahmad Rizki Pratama', class: 'X TKJ A', major: 'TKJ', average: 85, attendance: 95, nis: '2024001', gender: 'L', address: 'Lumajang' },
                    { name: 'Siti Nurhaliza Putri', class: 'X TKJ A', major: 'TKJ', average: 88, attendance: 92, nis: '2024002', gender: 'P', address: 'Lumajang' },
                    { name: 'Budi Santoso', class: 'X TKJ B', major: 'TKJ', average: 82, attendance: 88, nis: '2024003', gender: 'L', address: 'Lumajang' },
                    { name: 'Dewi Sartika', class: 'XI RPL', major: 'RPL', average: 90, attendance: 96, nis: '2023001', gender: 'P', address: 'Lumajang' },
                    { name: 'Eko Prasetyo', class: 'XI RPL', major: 'RPL', average: 87, attendance: 94, nis: '2023002', gender: 'L', address: 'Lumajang' },
                    { name: 'Fitri Handayani', class: 'XI DPIB', major: 'DPIB', average: 89, attendance: 91, nis: '2023003', gender: 'P', address: 'Lumajang' },
                    { name: 'Gilang Ramadhan', class: 'XII TKJ A', major: 'TKJ', average: 86, attendance: 93, nis: '2022001', gender: 'L', address: 'Lumajang' },
                    { name: 'Hani Safitri', class: 'XII TKJ B', major: 'TKJ', average: 91, attendance: 97, nis: '2022002', gender: 'P', address: 'Lumajang' }
                ];
                filteredStudents = [...studentsData];
                generateStudentsTable();
                updateClassFilter();
            } catch (error) {
                console.error('Error loading students data:', error);
            }
        }

        function updateClassFilter() {
            const classSelect = document.getElementById('filterClass');
            const majorSelect = document.getElementById('filterMajor');
            
            const classes = [...new Set(studentsData.map(student => student.class))].sort();
            const majors = [...new Set(studentsData.map(student => student.major))].sort();
            
            // Clear existing options except default
            classSelect.innerHTML = '<option value="">Semua Kelas</option>';
            majorSelect.innerHTML = '<option value="">Semua Jurusan</option>';
            
            // Add class options
            classes.forEach(className => {
                if (className && className !== 'Tidak Diketahui') {
                    const option = document.createElement('option');
                    option.value = className;
                    option.textContent = className;
                    classSelect.appendChild(option);
                }
            });
            
            // Add major options
            majors.forEach(majorName => {
                if (majorName && majorName !== 'Tidak Diketahui') {
                    const option = document.createElement('option');
                    option.value = majorName;
                    option.textContent = majorName;
                    majorSelect.appendChild(option);
                }
            });
        }

        function generateStudentsTable() {
            const table = document.getElementById('studentsTable');
            
            if (filteredStudents.length === 0) {
                table.innerHTML = `
                    <tr>
                        <td colspan="7" class="p-8 text-center text-gray-500 dark:text-gray-400">
                            <i class="fas fa-spinner fa-spin text-2xl mb-2"></i>
                            <p>Memuat data siswa...</p>
                        </td>
                    </tr>
                `;
                return;
            }
            
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const studentsToShow = filteredStudents.slice(startIndex, endIndex);
            
            table.innerHTML = studentsToShow.map(student => {
                const initials = student.name.split(' ').map(n => n[0]).join('').substring(0, 2);
                const majorColors = {
                    'TKJ': 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200',
                    'RPL': 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200',
                    'DPIB': 'bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200',
                    'MM': 'bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200',
                    'TBSM': 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200',
                    'Umum': 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200'
                };
                
                return `
                    <tr class="border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700">
                        <td class="p-3">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-sm">
                                    ${initials}
                                </div>
                                <div>
                                    <span class="font-medium text-gray-800 dark:text-white">${student.name}</span>
                                </div>
                            </div>
                        </td>
                        <td class="p-3 text-gray-600 dark:text-gray-300">${student.class}</td>
                        <td class="p-3">
                            <span class="px-2 py-1 rounded-full text-xs font-medium ${majorColors[student.major] || majorColors['Umum']}">${student.major}</span>
                        </td>
                    </tr>
                `;
            }).join('');
            
            updatePagination();
        }

        function updatePagination() {
            const totalPages = Math.ceil(filteredStudents.length / itemsPerPage);
            const startIndex = (currentPage - 1) * itemsPerPage + 1;
            const endIndex = Math.min(currentPage * itemsPerPage, filteredStudents.length);
            
            document.getElementById('showingCount').textContent = `${startIndex}-${endIndex}`;
            document.getElementById('totalCount').textContent = filteredStudents.length;
            
            document.getElementById('prevPage').disabled = currentPage === 1;
            document.getElementById('nextPage').disabled = currentPage === totalPages;
        }

        // Search and filter functionality
        document.getElementById('searchStudent').addEventListener('input', filterStudents);
        document.getElementById('filterClass').addEventListener('change', filterStudents);
        document.getElementById('filterMajor').addEventListener('change', filterStudents);

        function filterStudents() {
            const searchTerm = document.getElementById('searchStudent').value.toLowerCase();
            const classFilter = document.getElementById('filterClass').value;
            const majorFilter = document.getElementById('filterMajor').value;
            
            filteredStudents = studentsData.filter(student => {
                const matchesSearch = student.name.toLowerCase().includes(searchTerm);
                const matchesClass = !classFilter || student.class === classFilter;
                const matchesMajor = !majorFilter || student.major === majorFilter;
                return matchesSearch && matchesClass && matchesMajor;
            });
            
            currentPage = 1;
            generateStudentsTable();
        }

        // Pagination controls
        document.getElementById('prevPage').addEventListener('click', () => {
            if (currentPage > 1) {
                currentPage--;
                generateStudentsTable();
            }
        });

        document.getElementById('nextPage').addEventListener('click', () => {
            const totalPages = Math.ceil(filteredStudents.length / itemsPerPage);
            if (currentPage < totalPages) {
                currentPage++;
                generateStudentsTable();
            }
        });

        // Todo List Management
        let todos = [
            { id: 1, text: 'Persiapkan materi Matematika kelas XI', priority: 'high', dueDate: '2024-12-20', completed: false, createdAt: new Date('2024-12-15') },
            { id: 2, text: 'Koreksi tugas siswa kelas X TKJ', priority: 'normal', dueDate: '2024-12-18', completed: false, createdAt: new Date('2024-12-14') },
            { id: 3, text: 'Rapat koordinasi wali kelas', priority: 'urgent', dueDate: '2024-12-17', completed: true, createdAt: new Date('2024-12-13') },
            { id: 4, text: 'Update nilai siswa di sistem', priority: 'normal', dueDate: '2024-12-19', completed: false, createdAt: new Date('2024-12-12') },
            { id: 5, text: 'Buat laporan bulanan kelas XI RPL', priority: 'high', dueDate: '2024-12-25', completed: false, createdAt: new Date('2024-12-11') }
        ];
        let filteredTodos = [...todos];

        // Notes Management
        let notes = [
            { id: 1, title: 'Progress Siswa Kelas XI RPL', category: 'pembelajaran', content: 'Siswa kelas XI RPL menunjukkan progress yang baik dalam materi algoritma. Perlu ditingkatkan lagi pemahaman tentang struktur data.', createdAt: new Date('2024-12-15') },
            { id: 2, title: 'Follow Up Orang Tua', category: 'siswa', content: 'Perlu follow up dengan orang tua siswa yang sering terlambat: Ahmad (X TKJ A), Siti (XI DPIB)', createdAt: new Date('2024-12-14') },
            { id: 3, title: 'Rencana Remedial', category: 'pembelajaran', content: 'Rencana remedial untuk 3 siswa kelas X TKJ yang nilainya di bawah KKM pada materi fungsi kuadrat', createdAt: new Date('2024-12-13') },
            { id: 4, title: 'Koordinasi BK', category: 'administrasi', content: 'Koordinasi dengan guru BK untuk siswa yang bermasalah dalam kedisiplinan', createdAt: new Date('2024-12-12') }
        ];
        let filteredNotes = [...notes];

        // Journal Management
        let journals = [
            { id: 1, date: '2024-12-16', class: 'XI RPL', subject: 'Matematika', time: '08:30-09:15', topic: 'Fungsi Komposisi', activity: 'Penjelasan konsep, latihan soal, diskusi kelompok', notes: 'Siswa antusias, perlu tambahan latihan', createdAt: new Date('2024-12-16') },
            { id: 2, date: '2024-12-15', class: 'X TKJ A', subject: 'Matematika', time: '07:00-08:30', topic: 'Sistem Persamaan Linear', activity: 'Metode eliminasi dan substitusi', notes: 'Beberapa siswa masih kesulitan', createdAt: new Date('2024-12-15') },
            { id: 3, date: '2024-12-14', class: 'XII TKJ A', subject: 'Matematika', time: '09:30-11:00', topic: 'Integral Tak Tentu', activity: 'Rumus dasar integral, contoh soal', notes: 'Materi cukup sulit, perlu pengulangan', createdAt: new Date('2024-12-14') }
        ];
        let filteredJournals = [...journals];

        // Modal Functions
        function openProfileModal() {
            document.getElementById('profileModal').classList.remove('hidden');
        }

        function closeProfileModal() {
            document.getElementById('profileModal').classList.add('hidden');
        }

        function toggleTodoList() {
            document.getElementById('todoModal').classList.remove('hidden');
        }

        function closeTodoModal() {
            document.getElementById('todoModal').classList.add('hidden');
        }

        function toggleNotes() {
            document.getElementById('notesModal').classList.remove('hidden');
        }

        function closeNotesModal() {
            document.getElementById('notesModal').classList.add('hidden');
        }

        function openJournalModal() {
            document.getElementById('journalModal').classList.remove('hidden');
            renderJournals();
        }

        function closeJournalModal() {
            document.getElementById('journalModal').classList.add('hidden');
        }

        function openCapaianModal() {
            document.getElementById('capaianModal').classList.remove('hidden');
        }

        function closeCapaianModal() {
            document.getElementById('capaianModal').classList.add('hidden');
        }

        function showCapaianTab(tabId) {
            // Hide all content
            document.querySelectorAll('.capaian-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // Show selected content
            document.getElementById(`capaian-${tabId}`).classList.remove('hidden');
            
            // Update tab styles
            document.querySelectorAll('.capaian-tab').forEach(tab => {
                tab.classList.remove('active', 'text-blue-600', 'border-b-2', 'border-blue-600');
                tab.classList.add('text-gray-600', 'dark:text-gray-300', 'hover:text-blue-600');
            });
            
            // Activate selected tab
            const activeTab = document.querySelector(`[data-tab="${tabId}"]`);
            activeTab.classList.add('active', 'text-blue-600', 'border-b-2', 'border-blue-600');
            activeTab.classList.remove('text-gray-600', 'dark:text-gray-300', 'hover:text-blue-600');
        }

        function openMaterialsModal() {
            document.getElementById('materialsModal').classList.remove('hidden');
        }

        function closeMaterialsModal() {
            document.getElementById('materialsModal').classList.add('hidden');
        }

        function showMaterialsTab(tabId) {
            // Hide all content
            document.querySelectorAll('.materials-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // Show selected content
            document.getElementById(`materials-${tabId}`).classList.remove('hidden');
            
            // Update tab styles
            document.querySelectorAll('.materials-tab').forEach(tab => {
                tab.classList.remove('active', 'text-blue-600', 'border-b-2', 'border-blue-600');
                tab.classList.add('text-gray-600', 'dark:text-gray-300', 'hover:text-blue-600');
            });
            
            // Activate selected tab
            const activeTab = document.querySelector(`[data-tab="${tabId}"]`);
            activeTab.classList.add('active', 'text-blue-600', 'border-b-2', 'border-blue-600');
            activeTab.classList.remove('text-gray-600', 'dark:text-gray-300', 'hover:text-blue-600');
        }

        // Under Construction Modal Functions
        function openUnderConstructionModal(featureName) {
            document.getElementById('underConstructionFeature').textContent = featureName;
            document.getElementById('underConstructionModal').classList.remove('hidden');
        }

        function closeUnderConstructionModal() {
            document.getElementById('underConstructionModal').classList.add('hidden');
        }

        // Todo Functions
        function showAddTodoForm() {
            document.getElementById('addTodoForm').classList.remove('hidden');
            document.getElementById('newTodoText').focus();
        }

        function hideAddTodoForm() {
            document.getElementById('addTodoForm').classList.add('hidden');
            document.getElementById('newTodoText').value = '';
            document.getElementById('newTodoPriority').value = 'normal';
            document.getElementById('newTodoDueDate').value = '';
        }

        function addNewTodo() {
            const text = document.getElementById('newTodoText').value.trim();
            const priority = document.getElementById('newTodoPriority').value;
            const dueDate = document.getElementById('newTodoDueDate').value;
            if (!text) {
                alert('Mohon masukkan teks tugas');
                return;
            }
            const newTodo = {
                id: Date.now(),
                text: text,
                priority: priority,
                dueDate: dueDate,
                completed: false,
                createdAt: new Date()
            };
            todos.unshift(newTodo);
            hideAddTodoForm();
            filterTodos();
            updateTodoCount();
        }

        function deleteTodo(id) {
            if (confirm('Yakin ingin menghapus tugas ini?')) {
                todos = todos.filter(todo => todo.id !== id);
                filterTodos();
                updateTodoCount();
            }
        }

        function toggleTodo(id) {
            const todo = todos.find(t => t.id === id);
            if (todo) {
                todo.completed = !todo.completed;
                filterTodos();
                updateTodoCount();
            }
        }

        function filterTodos() {
            const searchTerm = document.getElementById('todoSearch').value.toLowerCase();
            filteredTodos = todos.filter(todo => 
                todo.text.toLowerCase().includes(searchTerm)
            );
            renderTodos();
        }

        function renderTodos() {
            const container = document.getElementById('todoList');
            const emptyState = document.getElementById('todoEmptyState');
            if (filteredTodos.length === 0) {
                container.innerHTML = '';
                emptyState.classList.remove('hidden');
                return;
            }
            emptyState.classList.add('hidden');
            const priorityColors = {
                'normal': 'border-l-blue-500',
                'high': 'border-l-orange-500',
                'urgent': 'border-l-red-500'
            };
            const priorityLabels = {
                'normal': 'Normal',
                'high': 'Tinggi',
                'urgent': 'Mendesak'
            };
            container.innerHTML = filteredTodos.map(todo => {
                const dueDate = todo.dueDate ? new Date(todo.dueDate) : null;
                const isOverdue = dueDate && dueDate < new Date() && !todo.completed;
                
                return `
                    <div class="flex items-start space-x-3 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border-l-4 ${priorityColors[todo.priority]} ${todo.completed ? 'opacity-60' : ''}">
                        <input type="checkbox" ${todo.completed ? 'checked' : ''}
                                onchange="toggleTodo(${todo.id})"
                               class="w-5 h-5 text-blue-600 mt-1">
                        <div class="flex-1">
                            <p class="text-gray-800 dark:text-white ${todo.completed ? 'line-through' : ''}">${todo.text}</p>
                            <div class="flex items-center space-x-4 mt-2 text-sm">
                                <span class="px-2 py-1 rounded-full text-xs font-medium ${
                                    todo.priority === 'urgent' ? 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200' :
                                    todo.priority === 'high' ? 'bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200' :
                                    'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200'
                                }">${priorityLabels[todo.priority]}</span>
                                ${todo.dueDate ? `<span class="text-gray-600 dark:text-gray-300 ${isOverdue ? 'text-red-600 dark:text-red-400 font-medium' : ''}">
                                    <i class="fas fa-calendar-alt mr-1"></i>${new Date(todo.dueDate).toLocaleDateString('id-ID')}
                                </span>` : ''}
                            </div>
                        </div>
                        <button onclick="deleteTodo(${todo.id})" class="text-red-500 hover:text-red-700 p-1">
                            <i class="fas fa-trash text-sm"></i>
                        </button>
                    </div>
                `;
            }).join('');
        }

        function updateTodoCount() {
            const incompleteTodos = todos.filter(todo => !todo.completed).length;
            document.getElementById('todoCount').textContent = incompleteTodos;
        }

        // Notes Functions
        function showAddNoteForm() {
            document.getElementById('addNoteForm').classList.remove('hidden');
            document.getElementById('newNoteTitle').focus();
        }

        function hideAddNoteForm() {
            document.getElementById('addNoteForm').classList.add('hidden');
            document.getElementById('newNoteTitle').value = '';
            document.getElementById('newNoteCategory').value = 'pembelajaran';
            document.getElementById('newNoteContent').value = '';
        }

        function addNewNote() {
            const title = document.getElementById('newNoteTitle').value.trim();
            const category = document.getElementById('newNoteCategory').value;
            const content = document.getElementById('newNoteContent').value.trim();
            if (!title || !content) {
                alert('Mohon lengkapi judul dan isi catatan');
                return;
            }
            const newNote = {
                id: Date.now(),
                title: title,
                category: category,
                content: content,
                createdAt: new Date()
            };
            notes.unshift(newNote);
            hideAddNoteForm();
            filterNotes();
        }

        function deleteNote(id) {
            if (confirm('Yakin ingin menghapus catatan ini?')) {
                notes = notes.filter(note => note.id !== id);
                filterNotes();
            }
        }

        function filterNotes() {
            const searchTerm = document.getElementById('notesSearch').value.toLowerCase();
            const categoryFilter = document.getElementById('notesFilter').value;
            
            filteredNotes = notes.filter(note => {
                const matchesSearch = note.title.toLowerCase().includes(searchTerm) ||
                                     note.content.toLowerCase().includes(searchTerm);
                const matchesCategory = !categoryFilter || note.category === categoryFilter;
                return matchesSearch && matchesCategory;
            });
            renderNotes();
        }

        function renderNotes() {
            const container = document.getElementById('notesList');
            const emptyState = document.getElementById('notesEmptyState');
            if (filteredNotes.length === 0) {
                container.innerHTML = '';
                emptyState.classList.remove('hidden');
                return;
            }
            emptyState.classList.add('hidden');
            const categoryColors = {
                'pembelajaran': 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200',
                'siswa': 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200',
                'administrasi': 'bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200',
                'rapat': 'bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200',
                'lainnya': 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200'
            };
            container.innerHTML = filteredNotes.map(note => `
                <div class="bg-white dark:bg-gray-700 rounded-lg p-4 shadow-sm border border-gray-200 dark:border-gray-600">
                    <div class="flex justify-between items-start mb-3">
                        <h4 class="font-semibold text-gray-800 dark:text-white">${note.title}</h4>
                        <button onclick="deleteNote(${note.id})" class="text-red-500 hover:text-red-700 p-1">
                            <i class="fas fa-trash text-sm"></i>
                        </button>
                    </div>
                    <p class="text-gray-600 dark:text-gray-300 text-sm mb-3 line-clamp-3">${note.content}</p>
                    <div class="flex justify-between items-center">
                        <span class="px-2 py-1 rounded-full text-xs font-medium ${categoryColors[note.category]}">${note.category}</span>
                        <span class="text-xs text-gray-500 dark:text-gray-400">${note.createdAt.toLocaleDateString('id-ID')}</span>
                    </div>
                </div>
            `).join('');
        }

        // Journal Functions
        function showAddJournalForm() {
            document.getElementById('addJournalForm').classList.remove('hidden');
            document.getElementById('newJournalDate').value = new Date().toISOString().split('T')[0];
        }

        function hideAddJournalForm() {
            document.getElementById('addJournalForm').classList.add('hidden');
            document.getElementById('newJournalDate').value = '';
            document.getElementById('newJournalClass').value = '';
            document.getElementById('newJournalSubject').value = '';
            document.getElementById('newJournalTime').value = '';
            document.getElementById('newJournalTopic').value = '';
            document.getElementById('newJournalActivity').value = '';
            document.getElementById('newJournalNotes').value = '';
        }

        function addNewJournal() {
            const date = document.getElementById('newJournalDate').value;
            const className = document.getElementById('newJournalClass').value;
            const subject = document.getElementById('newJournalSubject').value;
            const time = document.getElementById('newJournalTime').value;
            const topic = document.getElementById('newJournalTopic').value;
            const activity = document.getElementById('newJournalActivity').value;
            const notes = document.getElementById('newJournalNotes').value;
            if (!date || !className || !subject || !topic) {
                alert('Mohon lengkapi data wajib (tanggal, kelas, mata pelajaran, topik)');
                return;
            }
            const newJournal = {
                id: Date.now(),
                date: date,
                class: className,
                subject: subject,
                time: time,
                topic: topic,
                activity: activity,
                notes: notes,
                createdAt: new Date()
            };
            journals.unshift(newJournal);
            hideAddJournalForm();
            filterJournals();
        }

        function deleteJournal(id) {
            if (confirm('Yakin ingin menghapus jurnal ini?')) {
                journals = journals.filter(journal => journal.id !== id);
                filterJournals();
            }
        }

        function filterJournals() {
            const searchTerm = document.getElementById('journalSearch').value.toLowerCase();
            const classFilter = document.getElementById('journalClassFilter').value;
            
            filteredJournals = journals.filter(journal => {
                const matchesSearch = journal.topic.toLowerCase().includes(searchTerm) ||
                                     journal.subject.toLowerCase().includes(searchTerm) ||
                                    journal.activity.toLowerCase().includes(searchTerm);
                const matchesClass = !classFilter || journal.class === classFilter;
                return matchesSearch && matchesClass;
            });
            renderJournals();
        }

        function renderJournals() {
            const container = document.getElementById('journalList');
            const emptyState = document.getElementById('journalEmptyState');
            if (filteredJournals.length === 0) {
                container.innerHTML = '';
                emptyState.classList.remove('hidden');
                return;
            }
            emptyState.classList.add('hidden');
            container.innerHTML = filteredJournals.map(journal => `
                <div class="bg-white dark:bg-gray-700 rounded-lg p-4 shadow-sm border border-gray-200 dark:border-gray-600">
                    <div class="flex justify-between items-start mb-3">
                        <div class="flex items-center space-x-3">
                            <div class="bg-blue-500 text-white p-2 rounded">
                                <i class="fas fa-book text-sm"></i>
                            </div>
                            <div>
                                <h4 class="font-semibold text-gray-800 dark:text-white">${journal.topic}</h4>
                                <p class="text-sm text-gray-600 dark:text-gray-300">${journal.subject} - ${journal.class}</p>
                            </div>
                        </div>
                        <button onclick="deleteJournal(${journal.id})" class="text-red-500 hover:text-red-700 p-1">
                            <i class="fas fa-trash text-sm"></i>
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-3">
                        <div>
                            <p class="text-sm text-gray-600 dark:text-gray-400">Tanggal & Waktu:</p>
                            <p class="font-medium text-gray-800 dark:text-white">${new Date(journal.date).toLocaleDateString('id-ID')} ${journal.time ? '‚Ä¢ ' + journal.time : ''}</p>
                        </div>
                        <div>
                            <p class="text-sm text-gray-600 dark:text-gray-400">Kegiatan:</p>
                            <p class="text-gray-800 dark:text-white">${journal.activity || '-'}</p>
                        </div>
                    </div>
                    
                    ${journal.notes ? `
                        <div class="bg-gray-50 dark:bg-gray-600 rounded p-3">
                            <p class="text-sm text-gray-600 dark:text-gray-400 mb-1">Catatan:</p>
                            <p class="text-gray-800 dark:text-white text-sm">${journal.notes}</p>
                        </div>
                    ` : ''}
                </div>
            `).join('');
        }

        // Event Listeners for Guru Dashboard
        document.getElementById('todoSearch').addEventListener('input', filterTodos);
        document.getElementById('notesSearch').addEventListener('input', filterNotes);
        document.getElementById('notesFilter').addEventListener('change', filterNotes);
        document.getElementById('journalSearch').addEventListener('input', filterJournals);
        document.getElementById('journalClassFilter').addEventListener('change', filterJournals);

        // Close modals when clicking outside
        document.addEventListener('click', function(event) {
            const modals = ['profileModal', 'todoModal', 'notesModal', 'capaianModal', 'materialsModal', 'journalModal', 'underConstructionModal'];
            modals.forEach(modalId => {
                const modal = document.getElementById(modalId);
                if (event.target === modal) {
                    modal.classList.add('hidden');
                }
            });
        });

        // Course management functions (from original code)
        function showCreateCourse(courseId = null) {
            editingCourseId = courseId;
            const modal = document.getElementById('createCourseModal');
            const title = document.getElementById('createCourseModalTitle');
            const buttonText = document.getElementById('createCourseButtonText');
            
            if (courseId) {
                // Edit mode
                const course = courses.find(c => c.id === courseId);
                if (course) {
                    document.getElementById('editCourseId').value = course.id;
                    document.getElementById('courseTitle').value = course.title;
                    document.getElementById('courseDescription').value = course.description;
                    document.getElementById('courseDuration').value = course.duration;
                    document.getElementById('courseContent').value = course.content;
                    title.textContent = 'Edit Kursus';
                    buttonText.textContent = 'Simpan Perubahan';
                }
            } else {
                // Create mode
                document.getElementById('createCourseForm').reset();
                document.getElementById('editCourseId').value = '';
                title.textContent = 'Buat Kursus Baru';
                buttonText.textContent = 'Buat Kursus';
            }
            
            modal.classList.remove('hidden');
        }

        function hideCreateCourse() {
            document.getElementById('createCourseModal').classList.add('hidden');
            document.getElementById('createCourseForm').reset();
            editingCourseId = null;
        }

        document.getElementById('createCourseForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const title = document.getElementById('courseTitle').value;
            const description = document.getElementById('courseDescription').value;
            const duration = parseInt(document.getElementById('courseDuration').value);
            const content = document.getElementById('courseContent').value;
            const courseId = document.getElementById('editCourseId').value;
            
            if (courseId) {
                // Update existing course
                const courseIndex = courses.findIndex(c => c.id === parseInt(courseId));
                if (courseIndex !== -1) {
                    courses[courseIndex] = {
                        ...courses[courseIndex],
                        title,
                        description,
                        duration,
                        content
                    };
                    showToast('Kursus berhasil diperbarui!', 'success');
                }
            } else {
                // Create new course
                const newCourse = {
                    id: Date.now(),
                    title,
                    description,
                    duration,
                    author: currentUser.name,
                    authorId: currentUser.id,
                    content
                };
                
                courses.push(newCourse);
                showToast('Kursus berhasil dibuat!', 'success');
            }
            
            // Save to localStorage
            localStorage.setItem('simpel_courses', JSON.stringify(courses));
            
            hideCreateCourse();
            loadGuruCourses();
        });

        function deleteCourse(courseId) {
            if (confirm('Apakah Anda yakin ingin menghapus kursus ini?')) {
                courses = courses.filter(c => c.id !== courseId);
                localStorage.setItem('simpel_courses', JSON.stringify(courses));
                loadGuruCourses();
                showToast('Kursus berhasil dihapus!', 'success');
            }
        }

        function loadGuruCourses() {
            const courseList = document.getElementById('courseList');
            courseList.innerHTML = '';
            
            // Filter courses by current user
            const userCourses = courses.filter(course => course.authorId === currentUser.id);
            
            if (userCourses.length === 0) {
                courseList.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <div class="text-gray-400 text-6xl mb-4">üìö</div>
                        <h3 class="text-xl font-medium text-gray-500 mb-2">Belum ada kursus</h3>
                        <p class="text-gray-400">Mulai dengan membuat kursus pertama Anda</p>
                    </div>
                `;
                return;
            }
            
            userCourses.forEach(course => {
                const courseCard = createCourseCard(course, true);
                courseList.appendChild(courseCard);
            });
        }

        function loadWaliCourses() {
            const courseList = document.getElementById('waliCourseList');
            courseList.innerHTML = '';
            
            if (courses.length === 0) {
                courseList.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <div class="text-gray-400 text-6xl mb-4">üìö</div>
                        <h3 class="text-xl font-medium text-gray-500 mb-2">Belum ada kursus tersedia</h3>
                        <p class="text-gray-400">Guru belum membuat kursus apapun</p>
                    </div>
                `;
                return;
            }
            
            courses.forEach(course => {
                const courseCard = createCourseCard(course, false);
                courseList.appendChild(courseCard);
            });
        }

        function loadSiswaCourses() {
            const courseList = document.getElementById('siswaCourseList');
            courseList.innerHTML = '';
            
            if (courses.length === 0) {
                courseList.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <div class="text-gray-400 text-6xl mb-4">üìö</div>
                        <h3 class="text-xl font-medium text-gray-500 mb-2">Belum ada kursus tersedia</h3>
                        <p class="text-gray-400">Guru belum membuat kursus apapun</p>
                    </div>
                `;
                return;
            }
            
            courses.forEach(course => {
                const courseCard = createCourseCard(course, false);
                courseList.appendChild(courseCard);
            });
        }

        function createCourseCard(course, isOwner) {
            const div = document.createElement('div');
            div.className = 'bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-xl card-hover';
            
            div.innerHTML = `
                <div class="flex items-center justify-between mb-4">
                    <div class="w-12 h-12 bg-purple-500 rounded-lg flex items-center justify-center">
                        <span class="text-white text-xl">üìö</span>
                    </div>
                    <span class="text-sm text-purple-600 font-semibold">${course.duration} menit</span>
                </div>
                <h4 class="text-lg font-bold text-gray-800 mb-2">${course.title}</h4>
                <p class="text-gray-600 text-sm mb-4">${course.description}</p>
                <div class="flex justify-between items-center">
                    <span class="text-xs text-gray-500">oleh ${course.author}</span>
                    <div class="flex space-x-2">
                        ${isOwner ? `
                            <button onclick="event.stopPropagation(); showCreateCourse(${course.id})" class="bg-yellow-500 text-white px-3 py-1 rounded text-sm hover:bg-yellow-600 transition">
                                Edit
                            </button>
                            <button onclick="event.stopPropagation(); deleteCourse(${course.id})" class="bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600 transition">
                                Hapus
                            </button>
                        ` : ''}
                        <button onclick="event.stopPropagation(); showCourseDetail(${course.id})" class="bg-purple-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-purple-700 transition">
                            ${isOwner ? 'Lihat' : 'Mulai'}
                        </button>
                    </div>
                </div>
            `;
            
            return div;
        }

        function showCourseDetail(courseId) {
            const course = courses.find(c => c.id === courseId);
            if (!course) return;
            
            document.getElementById('detailTitle').textContent = course.title;
            document.getElementById('detailContent').innerHTML = `
                <div class="space-y-4">
                    <div>
                        <h4 class="font-semibold text-gray-800">Deskripsi:</h4>
                        <p class="text-gray-600">${course.description}</p>
                    </div>
                    <div>
                        <h4 class="font-semibold text-gray-800">Durasi:</h4>
                        <p class="text-gray-600">${course.duration} menit</p>
                    </div>
                    <div>
                        <h4 class="font-semibold text-gray-800">Pengajar:</h4>
                        <p class="text-gray-600">${course.author}</p>
                    </div>
                    <div>
                        <h4 class="font-semibold text-gray-800">Konten Pembelajaran:</h4>
                        <p class="text-gray-600">${course.content}</p>
                    </div>
                    <div class="pt-4">
                        <button class="bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition font-semibold w-full">
                            Mulai Pembelajaran
                        </button>
                    </div>
                </div>
            `;
            document.getElementById('courseDetailModal').classList.remove('hidden');
        }

        function hideCourseDetail() {
            document.getElementById('courseDetailModal').classList.add('hidden');
        }

        // Initialize the app
        initializeData();
        showLanding();

        // Prayer Attendance Data and Functions
let prayerStudentsData = [];
let currentPrayer = '';
let currentPrayerDate = '';

// Prayer configuration
const prayerConfig = {
    'dhuha': {
        name: 'Sholat Dhuha',
        icon: 'üåÖ',
        time: 'Pagi',
        color: 'bg-yellow-500'
    },
    'dhuhur': {
        name: 'Sholat Dhuhur', 
        icon: '‚òÄÔ∏è',
        time: 'Siang',
        color: 'bg-orange-500'
    },
    'ashar': {
        name: 'Sholat Ashar',
        icon: 'üåá', 
        time: 'Sore',
        color: 'bg-red-500'
    },
    'jumat': {
        name: 'Sholat Jum\'at',
        icon: 'üïå',
        time: 'Jum\'at',
        color: 'bg-blue-500',
        note: 'Hanya untuk siswa laki-laki'
    }
};

// Modal Functions for Prayer Attendance
function openPrayerAttendanceModal() {
    const modal = document.getElementById('prayerAttendanceModal');
    modal.classList.remove('hidden');
    
    // Set today's date as default
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('prayerAttendanceDate').value = today;
    currentPrayerDate = today;
    
    // Reset form
    document.getElementById('prayerSelect').value = '';
    document.getElementById('prayerJumatNote').classList.add('hidden');
    document.getElementById('prayerSuccessMessage').classList.add('hidden');
    document.getElementById('prayerErrorMessage').classList.add('hidden');
    
    // Load students data
    loadPrayerStudents();
}

function closePrayerAttendanceModal() {
    document.getElementById('prayerAttendanceModal').classList.add('hidden');
    prayerStudentsData = [];
}

function hidePrayerConfirmationModal() {
    document.getElementById('prayerConfirmationModal').classList.add('hidden');
}

// Event Listeners for Prayer Form
document.getElementById('prayerSelect').addEventListener('change', function() {
    const selectedPrayer = this.value;
    const jumatNote = document.getElementById('prayerJumatNote');
    
    if (selectedPrayer) {
        currentPrayer = selectedPrayer;
        
        // Show/hide Jum'at note
        if (selectedPrayer === 'jumat') {
            jumatNote.classList.remove('hidden');
        } else {
            jumatNote.classList.add('hidden');
        }
        
        // Update student display if data is already loaded
        if (prayerStudentsData.length > 0) {
            displayPrayerStudents();
        }
    }
});

document.getElementById('prayerAttendanceDate').addEventListener('change', function() {
    currentPrayerDate = this.value;
});

// Load Students for Prayer Attendance
async function loadPrayerStudents() {
    const loadingElement = document.getElementById('prayerStudentsLoading');
    const containerElement = document.getElementById('prayerStudentsContainer');
    
    try {
        // Show loading state
        loadingElement.classList.remove('hidden');
        containerElement.classList.add('hidden');
        
        // Use the same students data from the main dashboard
        // For demo purposes, we'll use sample data
        const sampleStudents = [
            'AULIA AZZARA NUR RAMDANI',
            'CHIKA AFINSA RAMADHANI', 
            'RENO FIRMANSYAH',
            'RISQI ADITYA',
            'AUGUSTAV BRILLYAN SINDUARTHA',
            'PUTRA PUGUH PRADANA',
            'SALSAHIRA DUWI APRILIA',
            'WAHYU EKA ADI PRATAMA',
            'FIRDAUS ZIDDAN AZZAINURI',
            'MARVELINO ALFRADO',
            'MUHAMMAD EDI SANTOSO',
            'NABILA NUR AZIZAH',
            'ADINDA ANEZTYA ZAHRA',
            'FARHAN DHIYA\'UL HAQ',
            'RAFAEL ONIL MULYA PUTRA',
            'REYHAN ALIF RAMADHAN',
            'AYU DWI HANAFI',
            'BRIANDA WISNU YUSENA',
            'RAFI ARDIANSYAH EGI RAMADHAN',
            'VALENTINO AFASHA SALEH',
            'DINDA MAI SAFIRA',
            'MUHAMMAD HATTA PRIMA NURRAHMAN',
            'MUHAMMAD IRFAN KHOIRUL HIDAYAH',
            'NUR RAHMAD HIDAYAT'
        ];
        
        prayerStudentsData = sampleStudents.map((name, index) => ({
            id: index + 1,
            name: name,
            nis: `2023${(index + 1).toString().padStart(3, '0')}`,
            class: 'XI RPL',
            gender: Math.random() > 0.5 ? 'Laki-laki' : 'Perempuan', // Random gender for demo
            status: 'sholat' // default status
        }));
        
        // Hide loading and show students
        loadingElement.classList.add('hidden');
        containerElement.classList.remove('hidden');
        
        // Display students
        displayPrayerStudents();
        
    } catch (error) {
        console.error('Error loading students data:', error);
        
        // Show error
        loadingElement.innerHTML = `
            <div class="text-center py-4">
                <div class="text-red-500 text-4xl mb-2">‚ùå</div>
                <p class="text-red-600 mb-2">Gagal memuat data siswa</p>
                <p class="text-gray-500 text-sm mb-4">${error.message}</p>
                <button onclick="loadPrayerStudents()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg">
                    Coba Lagi
                </button>
            </div>
        `;
    }
}

// Display Students for Prayer Attendance
function displayPrayerStudents() {
    const container = document.getElementById('prayerStudentsContainer');
    container.innerHTML = '';
    
    if (!currentPrayer) {
        container.innerHTML = `
            <div class="text-center py-8">
                <div class="text-gray-400 text-4xl mb-2">üïå</div>
                <p class="text-gray-500">Silakan pilih jenis sholat terlebih dahulu</p>
            </div>
        `;
        return;
    }
    
    const prayer = prayerConfig[currentPrayer];
    
    prayerStudentsData.forEach((student, index) => {
        const studentCard = document.createElement('div');
        studentCard.className = 'flex items-center justify-between p-4 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors';
        
        // Special styling for Jum'at based on gender
        const isJumat = currentPrayer === 'jumat';
        const isFemale = student.gender === 'Perempuan';
        const jumatClass = isJumat && isFemale ? 'opacity-60' : '';
        
        studentCard.innerHTML = `
            <div class="flex items-center ${jumatClass}">
                <div class="w-10 h-10 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mr-4">
                    <span class="text-green-600 dark:text-green-400 font-semibold">${student.id}</span>
                </div>
                <div>
                    <h4 class="font-semibold text-gray-800 dark:text-white">${student.name}</h4>
                    <p class="text-sm text-gray-600 dark:text-gray-300">${prayer.icon} ${prayer.name} - ${student.class}</p>
                    <div class="flex gap-2 mt-1">
                        <span class="text-xs text-gray-500">NIS: ${student.nis}</span>
                        <span class="text-xs text-gray-500">‚Ä¢</span>
                        <span class="text-xs text-gray-500">${student.gender}</span>
                    </div>
                    ${isJumat && isFemale ? `<p class="text-xs text-orange-600 dark:text-orange-400 font-medium mt-1">‚ö†Ô∏è Tidak wajib Sholat Jum'at</p>` : ''}
                </div>
            </div>
            <div class="flex gap-1 flex-wrap">
                <button onclick="updatePrayerStatus(${index}, 'sholat')" 
                        class="px-3 py-2 rounded-lg transition-colors text-sm ${student.status === 'sholat' ? 'bg-green-500 text-white' : 'bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-green-100 dark:hover:bg-green-900'}">
                    üïå Sholat
                </button>
                <button onclick="updatePrayerStatus(${index}, 'berhalangan')" 
                        class="px-3 py-2 rounded-lg transition-colors text-sm ${student.status === 'berhalangan' ? 'bg-yellow-500 text-white' : 'bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-yellow-100 dark:hover:bg-yellow-900'}">
                    üö´ Berhalangan
                </button>
                <button onclick="updatePrayerStatus(${index}, 'tidak_sholat')" 
                        class="px-3 py-2 rounded-lg transition-colors text-sm ${student.status === 'tidak_sholat' ? 'bg-red-500 text-white' : 'bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-red-100 dark:hover:bg-red-900'}">
                    ‚ùå Tidak Sholat
                </button>
            </div>
        `;
        
        container.appendChild(studentCard);
    });
    
    updatePrayerSummary();
}

function updatePrayerStatus(index, status) {
    prayerStudentsData[index].status = status;
    displayPrayerStudents();
}

function markAllPrayerStatus(status) {
    prayerStudentsData.forEach(student => student.status = status);
    displayPrayerStudents();
}

function updatePrayerSummary() {
    const sholatCount = prayerStudentsData.filter(s => s.status === 'sholat').length;
    const berhalanganCount = prayerStudentsData.filter(s => s.status === 'berhalangan').length;
    const tidakSholatCount = prayerStudentsData.filter(s => s.status === 'tidak_sholat').length;
    const totalCount = prayerStudentsData.length;
    
    document.getElementById('prayerSholatCount').textContent = sholatCount;
    document.getElementById('prayerBerhalanganCount').textContent = berhalanganCount;
    document.getElementById('prayerTidakSholatCount').textContent = tidakSholatCount;
    document.getElementById('prayerTotalCount').textContent = totalCount;
}

// Validation and Submission
function validateAndSubmitPrayerAttendance() {
    const date = document.getElementById('prayerAttendanceDate').value;
    const prayer = document.getElementById('prayerSelect').value;
    
    if (!date || !prayer) {
        showPrayerError('Mohon lengkapi tanggal dan pilih jenis sholat!');
        return;
    }
    
    // Check if all students have status
    const hasEmptyStatus = prayerStudentsData.some(student => !student.status);
    if (hasEmptyStatus) {
        showPrayerError('Mohon pastikan semua siswa memiliki status kehadiran!');
        return;
    }
    
    // Show confirmation modal
    const prayerName = prayerConfig[prayer].name;
    document.getElementById('prayerConfirmationText').textContent = 
        `Anda akan menyimpan data kehadiran ${prayerName} untuk tanggal ${formatDate(date)}. Pastikan data sudah benar sebelum melanjutkan.`;
    
    document.getElementById('prayerConfirmationModal').classList.remove('hidden');
}

function showPrayerError(message) {
    const errorMessage = document.getElementById('prayerErrorMessage');
    const errorContent = document.getElementById('prayerErrorContent');
    errorContent.textContent = message;
    errorMessage.classList.remove('hidden');
    
    // Auto-hide after 8 seconds
    setTimeout(() => {
        errorMessage.classList.add('hidden');
    }, 8000);
}

function showPrayerSuccess(message) {
    const successMessage = document.getElementById('prayerSuccessMessage');
    if (message) {
        successMessage.querySelector('span').textContent = message;
    }
    successMessage.classList.remove('hidden');
    
    // Auto-hide after 5 seconds
    setTimeout(() => {
        successMessage.classList.add('hidden');
    }, 5000);
}

// Submit Prayer Attendance
async function submitPrayerAttendance() {
    const date = document.getElementById('prayerAttendanceDate').value;
    const prayer = document.getElementById('prayerSelect').value;
    
    // Show loading state
    const submitButton = document.querySelector('#prayerConfirmationModal button[onclick="submitPrayerAttendance()"]');
    const originalText = submitButton.innerHTML;
    submitButton.innerHTML = '‚è≥ Menyimpan...';
    submitButton.disabled = true;
    
    try {
        const prayerName = prayerConfig[prayer].name;
        
        // Prepare attendance data
        const attendanceRecords = prayerStudentsData.map(student => ({
            timestamp: new Date().toISOString(),
            date: date,
            class: 'XI RPL',
            prayer: prayerName,
            studentName: student.name,
            studentNis: student.nis,
            studentGender: student.gender,
            status: student.status,
            teacher: 'Feri Dwi Hermawan, S.Pd.'
        }));
        
        console.log('Saving prayer attendance data:', attendanceRecords);
        
        // Simulate API call delay
        await new Promise(resolve => setTimeout(resolve, 2000));
        
        // Simulate successful submission
        showPrayerSuccess(`Data kehadiran ${prayerName} berhasil disimpan untuk ${formatDate(date)}!`);
        hidePrayerConfirmationModal();
        
        // Reset form after successful submission
        setTimeout(() => {
            prayerStudentsData.forEach(student => student.status = 'sholat');
            displayPrayerStudents();
        }, 1000);
        
    } catch (error) {
        console.error('Error saving prayer attendance:', error);
        showPrayerError(`Gagal menyimpan data: ${error.message}. Coba refresh halaman dan ulangi.`);
    } finally {
        // Restore button state
        submitButton.innerHTML = originalText;
        submitButton.disabled = false;
    }
}

// Helper function to format date
function formatDate(dateString) {
    const date = new Date(dateString);
    const options = { 
        weekday: 'long', 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric' 
    };
    return date.toLocaleDateString('id-ID', options);
}

// Add loading spinner CSS
const prayerStyles = `
    .loading-spinner {
        border: 3px solid #f3f3f3;
        border-radius: 50%;
        border-top: 3px solid #3498db;
        width: 30px;
        height: 30px;
        animation: spin 1s linear infinite;
        margin: 0 auto;
    }
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
`;

// Inject styles
const styleSheet = document.createElement('style');
styleSheet.textContent = prayerStyles;
document.head.appendChild(styleSheet);
    </script>
</body>
</html>
